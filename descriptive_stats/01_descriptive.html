
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Descriptive analysis of stroke pathway data &#8212; SAMueL Stroke Audit Machine Learning 1</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Association between patient features on use of thrombolysis" href="04_thrombolysis_general.html" />
    <link rel="prev" title="Outline - what is in this section?" href="outline.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">SAMueL Stroke Audit Machine Learning 1</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction/intro.html">
                    Introduction to SAMueL-1 (Stroke Audit Machine Learning)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Summary
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/abstract.html">
   Abstract
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/plain_english_short.html">
   Plain English Summary (short)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/plain_english.html">
   Plain English Summary (long)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/scientific_summary.html">
   Scientific Summary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../summary_slides/summary_slides.html">
   Summary slides
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/project_team.html">
   Contact and Project Team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/videos.html">
   YouTube videos
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/stroke_thrombolysis.html">
   An introduction to stroke and thrombolysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/clinical_audit.html">
   What is clinical audit?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/ml_intro.html">
   Introduction to machine learning methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/clinical_pathway_simulation.html">
   Clinical pathway simulation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data and software
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/data.html">
   Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/software.html">
   Software
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Descriptive statistics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="outline.html">
   Outline - what is in this section?
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Descriptive analysis of stroke pathway data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_thrombolysis_general.html">
     Association between patient features on use of thrombolysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_thrombolysis_comparison.html">
     Comparison of average values for patients who receive thrombolysis and those that do not
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02a_daily_patterns.html">
     Pathway patterns throughout the day
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02b_weekly_patterns.html">
     Pathway patterns throughout the week
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03a_daily_patterns_single_team.html">
     Pathway patterns throughout the day in an example single stroke team
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03b_weekly_patterns_single_team.html">
     Pathway patterns throughout the week in an example single stroke team
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06_distributions.html">
     Stroke pathway timing distribution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="07_covariance.html">
     Measuring the covariance/correlation between features
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/kfold.html">
   Assessing accuracy of models with stratified k-fold cross-validation
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../logistic_regression/outline.html">
   Logistic Regression
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../logistic_regression/logistic_regression_single_fit.html">
     Logistic Regression Classifier - Fitting to all stroke teams together
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../logistic_regression/logistic_regression_hospit_fit_accuracy.html">
     Logistic Regression Classifier - Fitting hospital-specific models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../random_forest/outline.html">
   Random Forests
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_single_fit.html">
     Random Forest Classifier - Fitting to all stroke teams together
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_hospital_fit_accuracy.html">
     Random Forest Classifier - Fitting hospital-specific models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_train_save_hospital_models.html">
     Train and save hospital-level models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_compare_hospital.html">
     Compare level of agreement in clinical decision making between hospitals using Random Forests models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_benchmark_hospitals.html">
     Benchmark hospitals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_compare_highest_thrombolysing_with_benchmark.html">
     How would thrombolysis use change if clinical decisions were made by hospitals with the highest current thrombolysis rate?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_cohort_distance.html">
     Grouping hospitals by similarities in decision making
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/create_vignette_dataset.html">
     Patient level decisions at own hospital, and consensus decisions at other other hospitals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/vignettes.html">
     Thrombolysis hospital vs. benchmark diagrams and patient vignettes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/within_hospital_variability.html">
     Find similar patients who are treated differently within the same hospital
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/characterise_contentious_patients.html">
     What characterises a patient who is predicted to have high variation in thrombolysis use across different hospitals?
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../neural_net/outline.html">
   Neural Networks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001a_fully_connected_fit_check_training_time.html">
     Fully connected TensorFlow model - Check required training epochs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001b_fully_connected_fit.html">
     Fully connected TensorFlow model - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001c_fully_connect_analyse.html">
     Fully connected TensorFlow model - analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001d_learning_curve.html">
     Fully connected TensorFlow model - Learning curve
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/002b_1d_modular_fit.html">
     Modular TensorFlow model with 1D embedding - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/002c_1d_modular_analyse.html">
     Modular TensorFlow model with 1D embedding - analyse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/003a_2d_modular_fit.html">
     Modular TensorFlow model with 2D embedding - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/003b_2d_modular_analyse.html">
     Modular TensorFlow model with 2D embedding - analyse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/004a_generate_1d_nets_for_10k.html">
     Modular TensorFlow model with 1D embedding - Train and save model for 10k patient subset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/004b_analyse_10k_1d_modular.html">
     Investigating the output of neural net embedding subnets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/005a_generate_2d_nets_for_10k.html">
     Modular TensorFlow model with 2D embedding - Train and save model for 10k patient subset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/005b_analyse_10k_2d_modular.html">
     Investigating the output of neural net embedding subnets - with 2D subnet output
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ensemble/outline.html">
   Ensemble Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_generate_probabilities.html">
     Ensemble model fitting - generate probabilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/compare_model_outputs.html">
     Comparison of model outputs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_logistic_regression.html">
     Ensemble combine with logistic regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_random_forests.html">
     Ensemble combine with random forests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_neural_network.html">
     Ensemble combine with a neural network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_summary.html">
     Summary of results from ensemble models
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Pathway Simulation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pathway_sim/outline_model.html">
   Model building and validation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/thrombolysis_effect.html">
     Plotting the relationship between time to treatment and the probability of a good outcome
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/pathway_code.html">
     Pathway code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/extract_hospital_performance.html">
     Extract hospital performance for pathway model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/base_parameters.html">
     Base model parameters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/base_parameters_description.html">
     Summary of model base parameters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/validation.html">
     Stroke pathway simulation - validation and calibration
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pathway_sim/outline_scenarios.html">
   Testing of alternative what-if? scenarios
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/scenario_results_generation.html">
     Stroke pathway simulation - generation of results from alternative scenarios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/all_scenario_results.html">
     All scenario results (detailed)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/scenario_analysis.html">
     Analysis of alternative pathway scenarios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/scenario_analysis_1k_patient_cohort.html">
     Modelling the same patient population attending all hospitals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/explained_variance_in_thrombolysis.html">
     How much of the inter-hospital variation in thrombolysis use do in-hospital processes explain
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Qualitative research and PPI
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../qual/qual.html">
   Qualitative research
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../qual/ppi.html">
   Public and Patient Involvement
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendicies
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction/acknowledgements.html">
   Acknowledgements
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Additional analysis (not in NIHR report)
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01a_descriptive_nihss_cutoff.html">
   Using NIHSS to select large artey occulsion stroke patients (most suitable for thrombectomy)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_using_nihss_10_for_lvo.html">
   Analysis of stroke admission numbers and types using NIHSS 11+ as a surrogate for large vessel occlusions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="09_breakdown_mrs_nihss_by_age.html">
   Analysis of stroke type and pre-stroke modified Rankin Scale by age
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08_prestroke_mrs.html">
   Analysis of pre-stroke modified Rankin Scale
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/descriptive_stats/01_descriptive.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aim">
   Aim
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-libraries-and-data">
   Import libraries and data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#average-yearly-admissions">
   Average yearly admissions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#restrict-original-data-to-hospitals-with-at-least-300-admissions-10-thrombolysis-patients">
   Restrict original data to hospitals with at least 300 admissions + 10 thrombolysis patients
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stroke-types">
   Stroke types
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compare-thrombolysis-use-for-out-of-hospital-and-in-hospital-stroke-onset">
   Compare thrombolysis use for out-of-hospital and in-hospital stroke onset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#restrict-data-to-out-of-hospital-onset">
   Restrict data to out-of-hospital onset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-for-analysis-by-stroke-team">
   Function for analysis by stroke team
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-analysis-by-team-and-show-summary">
   Create analysis by team and show summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyse-for-all-patients-together">
   Analyse for all patients together
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-by-under-age-80-vs-80">
   Analysis by under age 80 vs 80+
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#under-age-80">
     Under age 80
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aged-80">
     Aged 80+
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary-figure">
   Summary figure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-of-stroke-severity">
   Analysis of stroke severity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyse-onset-to-arrival-times">
   Analyse onset-to-arrival times
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#queries-on-time-of-arrival-and-nihss-for-patients-who-receive-thrombolysis">
   Queries on time of arrival and NIHSS for patients who receive thrombolysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-observations">
   General observations
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Descriptive analysis of stroke pathway data</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#aim">
   Aim
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-libraries-and-data">
   Import libraries and data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#average-yearly-admissions">
   Average yearly admissions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#restrict-original-data-to-hospitals-with-at-least-300-admissions-10-thrombolysis-patients">
   Restrict original data to hospitals with at least 300 admissions + 10 thrombolysis patients
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stroke-types">
   Stroke types
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compare-thrombolysis-use-for-out-of-hospital-and-in-hospital-stroke-onset">
   Compare thrombolysis use for out-of-hospital and in-hospital stroke onset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#restrict-data-to-out-of-hospital-onset">
   Restrict data to out-of-hospital onset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#function-for-analysis-by-stroke-team">
   Function for analysis by stroke team
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-analysis-by-team-and-show-summary">
   Create analysis by team and show summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyse-for-all-patients-together">
   Analyse for all patients together
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-by-under-age-80-vs-80">
   Analysis by under age 80 vs 80+
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#under-age-80">
     Under age 80
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aged-80">
     Aged 80+
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary-figure">
   Summary figure
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis-of-stroke-severity">
   Analysis of stroke severity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analyse-onset-to-arrival-times">
   Analyse onset-to-arrival times
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#queries-on-time-of-arrival-and-nihss-for-patients-who-receive-thrombolysis">
   Queries on time of arrival and NIHSS for patients who receive thrombolysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-observations">
   General observations
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="descriptive-analysis-of-stroke-pathway-data">
<h1>Descriptive analysis of stroke pathway data<a class="headerlink" href="#descriptive-analysis-of-stroke-pathway-data" title="Permalink to this headline">#</a></h1>
<section id="aim">
<h2>Aim<a class="headerlink" href="#aim" title="Permalink to this headline">#</a></h2>
<p>Describe key pathway statistics</p>
<ul class="simple">
<li><p>Restrict data to stroke teams with at least 300 admissions (over three years) and 10 patients receiving thrombolysis.</p></li>
<li><p>Analyse pathway statistics by stroke team, and combined across all stroke teams.</p></li>
<li><p>Repeat team and combined analysis by age category (under aged 80 years, and aged 80+).</p></li>
<li><p>Create histograms of variation in key statistics across stroke teams.</p></li>
<li><p>Analyse onset-to-arrival (and breakdown by mild and non-mild stroke)</p></li>
</ul>
</section>
<section id="import-libraries-and-data">
<h2>Import libraries and data<a class="headerlink" href="#import-libraries-and-data" title="Permalink to this headline">#</a></h2>
<p>Data has been restricted to stroke teams with at least 300 admissions, with at least 10 patients receiving thrombolysis, over three years.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import libraries</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># import data</span>
<span class="n">raw_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="s1">&#39;./../data/2019-11-04-HQIP303-Exeter_MA.csv&#39;</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">headings</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">headings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;StrokeTeam&#39;, &#39;PatientUID&#39;, &#39;Pathway&#39;, &#39;S1AgeOnArrival&#39;, &#39;MoreEqual80y&#39;, &#39;S1Gender&#39;, &#39;S1Ethnicity&#39;, &#39;S1OnsetInHospital&#39;, &#39;S1OnsetToArrival_min&#39;, &#39;S1OnsetDateType&#39;, &#39;S1OnsetTimeType&#39;, &#39;S1ArriveByAmbulance&#39;, &#39;S1AdmissionHour&#39;, &#39;S1AdmissionDay&#39;, &#39;S1AdmissionQuarter&#39;, &#39;S1AdmissionYear&#39;, &#39;CongestiveHeartFailure&#39;, &#39;Hypertension&#39;, &#39;AtrialFibrillation&#39;, &#39;Diabetes&#39;, &#39;StrokeTIA&#39;, &#39;AFAntiplatelet&#39;, &#39;AFAnticoagulent&#39;, &#39;AFAnticoagulentVitK&#39;, &#39;AFAnticoagulentDOAC&#39;, &#39;AFAnticoagulentHeparin&#39;, &#39;S2INR&#39;, &#39;S2INRHigh&#39;, &#39;S2INRNK&#39;, &#39;S2NewAFDiagnosis&#39;, &#39;S2RankinBeforeStroke&#39;, &#39;Loc&#39;, &#39;LocQuestions&#39;, &#39;LocCommands&#39;, &#39;BestGaze&#39;, &#39;Visual&#39;, &#39;FacialPalsy&#39;, &#39;MotorArmLeft&#39;, &#39;MotorArmRight&#39;, &#39;MotorLegLeft&#39;, &#39;MotorLegRight&#39;, &#39;LimbAtaxia&#39;, &#39;Sensory&#39;, &#39;BestLanguage&#39;, &#39;Dysarthria&#39;, &#39;ExtinctionInattention&#39;, &#39;S2NihssArrival&#39;, &#39;S2BrainImagingTime_min&#39;, &#39;S2StrokeType&#39;, &#39;S2Thrombolysis&#39;, &#39;Haemorrhagic&#39;, &#39;TimeWindow&#39;, &#39;Comorbidity&#39;, &#39;Medication&#39;, &#39;Refusal&#39;, &#39;Age&#39;, &#39;Improving&#39;, &#39;TooMildSevere&#39;, &#39;TimeUnknownWakeUp&#39;, &#39;OtherMedical&#39;, &#39;S2ThrombolysisTime_min&#39;, &#39;S2TIAInLastMonth&#39;]
</pre></div>
</div>
</div>
</div>
<p>Show data types</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">raw_data</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 246676 entries, 0 to 246675
Data columns (total 62 columns):
 #   Column                  Non-Null Count   Dtype  
---  ------                  --------------   -----  
 0   StrokeTeam              246676 non-null  object 
 1   PatientUID              246676 non-null  object 
 2   Pathway                 246676 non-null  int64  
 3   S1AgeOnArrival          246676 non-null  object 
 4   MoreEqual80y            246676 non-null  object 
 5   S1Gender                246676 non-null  object 
 6   S1Ethnicity             246676 non-null  object 
 7   S1OnsetInHospital       246676 non-null  object 
 8   S1OnsetToArrival_min    154640 non-null  float64
 9   S1OnsetDateType         246676 non-null  object 
 10  S1OnsetTimeType         246676 non-null  object 
 11  S1ArriveByAmbulance     232503 non-null  object 
 12  S1AdmissionHour         246676 non-null  object 
 13  S1AdmissionDay          246676 non-null  object 
 14  S1AdmissionQuarter      246676 non-null  object 
 15  S1AdmissionYear         246676 non-null  int64  
 16  CongestiveHeartFailure  246676 non-null  object 
 17  Hypertension            246676 non-null  object 
 18  AtrialFibrillation      246676 non-null  object 
 19  Diabetes                246676 non-null  object 
 20  StrokeTIA               246676 non-null  object 
 21  AFAntiplatelet          47691 non-null   object 
 22  AFAnticoagulent         120409 non-null  object 
 23  AFAnticoagulentVitK     93603 non-null   object 
 24  AFAnticoagulentDOAC     93603 non-null   object 
 25  AFAnticoagulentHeparin  93603 non-null   object 
 26  S2INR                   4240 non-null    float64
 27  S2INRHigh               93603 non-null   object 
 28  S2INRNK                 93603 non-null   object 
 29  S2NewAFDiagnosis        70588 non-null   object 
 30  S2RankinBeforeStroke    246676 non-null  int64  
 31  Loc                     246676 non-null  int64  
 32  LocQuestions            236305 non-null  float64
 33  LocCommands             236579 non-null  float64
 34  BestGaze                235003 non-null  float64
 35  Visual                  233231 non-null  float64
 36  FacialPalsy             236381 non-null  float64
 37  MotorArmLeft            236475 non-null  float64
 38  MotorArmRight           236478 non-null  float64
 39  MotorLegLeft            236205 non-null  float64
 40  MotorLegRight           236202 non-null  float64
 41  LimbAtaxia              232480 non-null  float64
 42  Sensory                 233464 non-null  float64
 43  BestLanguage            236047 non-null  float64
 44  Dysarthria              235035 non-null  float64
 45  ExtinctionInattention   234707 non-null  float64
 46  S2NihssArrival          228279 non-null  float64
 47  S2BrainImagingTime_min  245535 non-null  float64
 48  S2StrokeType            245535 non-null  object 
 49  S2Thrombolysis          246676 non-null  object 
 50  Haemorrhagic            215844 non-null  object 
 51  TimeWindow              215844 non-null  object 
 52  Comorbidity             215844 non-null  object 
 53  Medication              215844 non-null  object 
 54  Refusal                 215844 non-null  object 
 55  Age                     215844 non-null  object 
 56  Improving               215844 non-null  object 
 57  TooMildSevere           215844 non-null  object 
 58  TimeUnknownWakeUp       215844 non-null  object 
 59  OtherMedical            215844 non-null  object 
 60  S2ThrombolysisTime_min  28482 non-null   float64
 61  S2TIAInLastMonth        21151 non-null   object 
dtypes: float64(19), int64(4), object(39)
memory usage: 116.7+ MB
</pre></div>
</div>
</div>
</div>
</section>
<section id="average-yearly-admissions">
<h2>Average yearly admissions<a class="headerlink" href="#average-yearly-admissions" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>82225
</pre></div>
</div>
</div>
</div>
</section>
<section id="restrict-original-data-to-hospitals-with-at-least-300-admissions-10-thrombolysis-patients">
<h2>Restrict original data to hospitals with at least 300 admissions + 10 thrombolysis patients<a class="headerlink" href="#restrict-original-data-to-hospitals-with-at-least-300-admissions-10-thrombolysis-patients" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">keep</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">groups</span> <span class="o">=</span> <span class="n">raw_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;StrokeTeam&#39;</span><span class="p">)</span> <span class="c1"># creates a new object of groups of data</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span> <span class="c1"># each group has an index and a dataframe of data</span>
    
    <span class="c1"># Skip if total admissions less than 300 or total thrombolysis &lt; 10</span>
    <span class="n">admissions</span> <span class="o">=</span> <span class="n">group_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">thrombolysis_received</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2Thrombolysis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">admissions</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">thrombolysis_received</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">continue</span>
    
    <span class="k">else</span><span class="p">:</span> 
        <span class="n">keep</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_df</span><span class="p">)</span>

<span class="c1"># Concatenate output</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">keep</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(239505, 62)
</pre></div>
</div>
</div>
</div>
</section>
<section id="stroke-types">
<h2>Stroke types<a class="headerlink" href="#stroke-types" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2StrokeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">/</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2StrokeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Infarction                           0.873435
Primary Intracerebral Haemorrhage    0.122106
Name: S2StrokeType, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="compare-thrombolysis-use-for-out-of-hospital-and-in-hospital-stroke-onset">
<h2>Compare thrombolysis use for out-of-hospital and in-hospital stroke onset<a class="headerlink" href="#compare-thrombolysis-use-for-out-of-hospital-and-in-hospital-stroke-onset" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create boolean feature for use of thrombolysis</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;use_thrombolysis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2Thrombolysis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>

<span class="c1"># Show percentage of strokes have in hospital onset</span>
<span class="n">in_hospital_onset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S1OnsetInHospital&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
<span class="n">percent_in_hosp</span> <span class="o">=</span> <span class="n">in_hospital_onset</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span> <span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;Percentage of stroke with in-hospital onset: </span><span class="si">{</span><span class="n">percent_in_hosp</span><span class="si">:</span><span class="s1">0.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># In hospital onset</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S1OnsetInHospital&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
<span class="n">thrombolysis_in</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">][</span><span class="s1">&#39;use_thrombolysis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span> <span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;Thrombolysis use (%) for in-hospital-onset </span><span class="si">{</span><span class="n">thrombolysis_in</span><span class="si">:</span><span class="s1">0.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Out of hospital onset</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S1OnsetInHospital&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;No&#39;</span>
<span class="n">thrombolysis_out</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">][</span><span class="s1">&#39;use_thrombolysis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
<span class="nb">print</span> <span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;Thrombolysis use (%) for out-of-hospital-onset </span><span class="si">{</span><span class="n">thrombolysis_out</span><span class="si">:</span><span class="s1">0.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Percentage of stroke with in-hospital onset: 5.3
Thrombolysis use (%) for in-hospital-onset 12.3
Thrombolysis use (%) for out-of-hospital-onset 11.8
</pre></div>
</div>
</div>
</div>
</section>
<section id="restrict-data-to-out-of-hospital-onset">
<h2>Restrict data to out-of-hospital onset<a class="headerlink" href="#restrict-data-to-out-of-hospital-onset" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S1OnsetInHospital&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;No&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="function-for-analysis-by-stroke-team">
<h2>Function for analysis by stroke team<a class="headerlink" href="#function-for-analysis-by-stroke-team" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">analyse_by_team</span><span class="p">(</span><span class="n">input_data</span><span class="p">):</span>
    
    <span class="c1"># Copy data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">input_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    
    <span class="c1"># Set up results lists</span>
    <span class="n">stroke_team</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">admissions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">age_80_plus</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="n">onset_known</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">rankin_before_stroke_all</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">nihss_arrival_all</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">known_arrival_within_4hrs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">rankin_before_stroke_4hrs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">nihss_arrival_4hrs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">onset_arrival_mins_mu</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">onset_arrival_mins_sigma</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">scan_within_4_hrs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">arrival_scan_mins_mu</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">arrival_scan_mins_sigma</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">scan_needle_mins_mu</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">scan_needle_mins_sigma</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">arrival_needle_mins_mu</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">arrival_needle_mins_sigma</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">onset_needle_mins_mu</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">onset_needle_mins_sigma</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">thrombolysis_rate</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">thrombolysis_after_180_min</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">thrombolysis_after_270_min</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">eligible</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># Split data by stroke team</span>
    <span class="n">groups</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;StrokeTeam&#39;</span><span class="p">)</span> <span class="c1"># creates a new object of groups of data</span>
    <span class="n">group_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">group_df</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span> 
        <span class="n">group_count</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="c1"># Record stroke team</span>
        <span class="n">stroke_team</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="c1"># Record admission numbers</span>
        <span class="n">admissions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="c1"># Get thrombolysis rate</span>
        <span class="n">thrombolysed</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2Thrombolysis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
        <span class="n">thrombolysis_rate</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thrombolysed</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        
        <span class="c1"># Get Rankin before stroke and NIHSS on arrival</span>
        <span class="n">rankin_before_stroke_all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2RankinBeforeStroke&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">nihss_arrival_all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        
        <span class="c1"># Record onset known proportion and remove rest</span>
        <span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Precise&#39;</span><span class="p">,</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">]</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">onset_known</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">group_df</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="c1"># Record onset &lt;4 hours and remove rest</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">240</span>
        <span class="n">known_arrival_within_4hrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">group_df</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
        
        <span class="c1"># Get Rankin before stroke and NIHSS on arrival</span>
        <span class="n">rankin_before_stroke_4hrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2RankinBeforeStroke&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">nihss_arrival_4hrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="c1"># Calc proportion 80+ (of those arriving within 4 hours)</span>
        <span class="n">age_filter</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;MoreEqual80y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
        <span class="n">age_80_plus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">age_filter</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="c1"># Get onset to arrival (of those arriving within 4 hours)</span>
        <span class="n">onset_to_arrival</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">]</span>
        <span class="n">onset_arrival_mins_mu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">onset_to_arrival</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">onset_arrival_mins_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">onset_to_arrival</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>

        <span class="c1"># Record scan within 4 hours of arrival (and remove the rest)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2BrainImagingTime_min&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">240</span>
        <span class="n">scan_within_4_hrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">group_df</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="c1"># Record arrival to scan (of those arriving within 4 hours)</span>
        <span class="n">arrival_to_scan</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2BrainImagingTime_min&#39;</span><span class="p">]</span>
        <span class="n">arrival_scan_mins_mu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrival_to_scan</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">arrival_scan_mins_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrival_to_scan</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>

        <span class="c1"># Thrombolysis given (of those scanned within 4 hours of arrival)</span>
        <span class="n">thrombolysed_mask</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="s1">&#39;S2Thrombolysis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
        <span class="n">eligible</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thrombolysed_mask</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>

        <span class="c1"># Scan to needle</span>
        <span class="n">thrombolysed</span> <span class="o">=</span> <span class="n">group_df</span><span class="p">[</span><span class="n">thrombolysed_mask</span><span class="p">]</span>
        <span class="n">scan_to_needle</span> <span class="o">=</span> <span class="p">(</span><span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2ThrombolysisTime_min&#39;</span><span class="p">]</span> <span class="o">-</span> 
                          <span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2BrainImagingTime_min&#39;</span><span class="p">])</span>
        <span class="n">scan_needle_mins_mu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scan_to_needle</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">scan_needle_mins_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scan_to_needle</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
        
        <span class="c1"># Arrival to needle</span>
        <span class="n">arrival_needle_mins_mu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2ThrombolysisTime_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">arrival_needle_mins_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2ThrombolysisTime_min&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
        
        <span class="c1"># Onset to needle</span>
        <span class="n">onset_to_needle</span> <span class="o">=</span> <span class="p">(</span><span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">]</span> <span class="o">+</span> 
                          <span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2ThrombolysisTime_min&#39;</span><span class="p">])</span>
        <span class="n">onset_needle_mins_mu</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">onset_to_needle</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">onset_needle_mins_sigma</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">onset_to_needle</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
        
        <span class="c1"># Proportions of thrombolysis after 180 or 270 min</span>
        <span class="n">thrombolysis_after_180</span> <span class="o">=</span> <span class="n">onset_to_needle</span> <span class="o">&gt;</span> <span class="mi">180</span>
        <span class="n">thrombolysis_after_270</span> <span class="o">=</span> <span class="n">onset_to_needle</span> <span class="o">&gt;</span> <span class="mi">270</span>
        <span class="n">thrombolysis_after_180_min</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thrombolysis_after_180</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        <span class="n">thrombolysis_after_270_min</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thrombolysis_after_270</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
        
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;stroke_team&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stroke_team</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;thrombolysis_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thrombolysis_rate</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;arrivals&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">admissions</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;80_plus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">age_80_plus</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rankin_before_stroke_all&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rankin_before_stroke_all</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;nihss_arrival_all&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_arrival_all</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_known&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_known</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;known_arrival_within_4hrs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">known_arrival_within_4hrs</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;known_arrival_within_4hrs_all&#39;</span><span class="p">]</span> <span class="o">=</span> \
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_known&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;known_arrival_within_4hrs&#39;</span><span class="p">]</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rankin_before_stroke_4hrs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rankin_before_stroke_4hrs</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;nihss_arrival_4hrs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_arrival_4hrs</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_arrival_mins_mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_arrival_mins_mu</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_arrival_mins_sigma&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_arrival_mins_sigma</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;scan_within_4_hrs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scan_within_4_hrs</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;arrival_scan_mins_mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrival_scan_mins_mu</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;arrival_scan_mins_sigma&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrival_scan_mins_sigma</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;eligable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">eligible</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;scan_needle_mins_mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scan_needle_mins_mu</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;scan_needle_mins_sigma&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scan_needle_mins_sigma</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;arrival_needle_mins_mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrival_needle_mins_mu</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;arrival_needle_mins_sigma&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrival_needle_mins_sigma</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_needle_mins_mu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_needle_mins_mu</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;onset_needle_mins_sigma&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_needle_mins_sigma</span>   
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;thrombolysis_after_180_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thrombolysis_after_180_min</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;thrombolysis_after_270_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">thrombolysis_after_270_min</span>
    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-analysis-by-team-and-show-summary">
<h2>Create analysis by team and show summary<a class="headerlink" href="#create-analysis-by-team-and-show-summary" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">analysis_by_team</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">analysis_by_team</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/full_analysis_by_team.csv&#39;</span><span class="p">)</span>
<span class="n">summary_by_hospital</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
<span class="n">summary_by_hospital</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>thrombolysis_rate</th>
      <td>132.0</td>
      <td>0.114536</td>
      <td>0.035449</td>
      <td>0.015306</td>
      <td>0.093239</td>
      <td>0.109547</td>
      <td>0.133314</td>
      <td>0.243174</td>
    </tr>
    <tr>
      <th>arrivals</th>
      <td>132.0</td>
      <td>1718.333333</td>
      <td>832.249409</td>
      <td>303.000000</td>
      <td>1133.000000</td>
      <td>1632.500000</td>
      <td>2265.250000</td>
      <td>6118.000000</td>
    </tr>
    <tr>
      <th>80_plus</th>
      <td>132.0</td>
      <td>0.425635</td>
      <td>0.056416</td>
      <td>0.292308</td>
      <td>0.387089</td>
      <td>0.427573</td>
      <td>0.457896</td>
      <td>0.576220</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_all</th>
      <td>132.0</td>
      <td>1.040435</td>
      <td>0.258761</td>
      <td>0.512531</td>
      <td>0.843626</td>
      <td>1.032913</td>
      <td>1.202876</td>
      <td>1.860384</td>
    </tr>
    <tr>
      <th>nihss_arrival_all</th>
      <td>132.0</td>
      <td>7.393900</td>
      <td>0.948271</td>
      <td>4.543634</td>
      <td>6.698829</td>
      <td>7.404792</td>
      <td>8.067855</td>
      <td>10.277926</td>
    </tr>
    <tr>
      <th>onset_known</th>
      <td>132.0</td>
      <td>0.665679</td>
      <td>0.134064</td>
      <td>0.344784</td>
      <td>0.573593</td>
      <td>0.641978</td>
      <td>0.752881</td>
      <td>0.988275</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs</th>
      <td>132.0</td>
      <td>0.600743</td>
      <td>0.089733</td>
      <td>0.257034</td>
      <td>0.557876</td>
      <td>0.608542</td>
      <td>0.662325</td>
      <td>0.813584</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs_all</th>
      <td>132.0</td>
      <td>0.392147</td>
      <td>0.062162</td>
      <td>0.222646</td>
      <td>0.352730</td>
      <td>0.392458</td>
      <td>0.430548</td>
      <td>0.558317</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_4hrs</th>
      <td>132.0</td>
      <td>1.052002</td>
      <td>0.264767</td>
      <td>0.455108</td>
      <td>0.877631</td>
      <td>1.059910</td>
      <td>1.204151</td>
      <td>1.843863</td>
    </tr>
    <tr>
      <th>nihss_arrival_4hrs</th>
      <td>132.0</td>
      <td>9.119220</td>
      <td>1.107748</td>
      <td>6.108696</td>
      <td>8.419594</td>
      <td>9.168358</td>
      <td>9.916195</td>
      <td>11.728546</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_mu</th>
      <td>132.0</td>
      <td>110.604942</td>
      <td>6.663145</td>
      <td>90.306383</td>
      <td>106.872313</td>
      <td>110.812667</td>
      <td>115.087515</td>
      <td>132.572368</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_sigma</th>
      <td>132.0</td>
      <td>52.401532</td>
      <td>2.342917</td>
      <td>46.456599</td>
      <td>50.822598</td>
      <td>52.119960</td>
      <td>53.668951</td>
      <td>63.899224</td>
    </tr>
    <tr>
      <th>scan_within_4_hrs</th>
      <td>132.0</td>
      <td>0.947503</td>
      <td>0.030163</td>
      <td>0.847328</td>
      <td>0.932828</td>
      <td>0.953808</td>
      <td>0.969191</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_mu</th>
      <td>132.0</td>
      <td>42.991449</td>
      <td>11.548507</td>
      <td>18.635392</td>
      <td>35.619539</td>
      <td>42.907270</td>
      <td>50.628576</td>
      <td>92.923345</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_sigma</th>
      <td>132.0</td>
      <td>43.168750</td>
      <td>6.917284</td>
      <td>24.002919</td>
      <td>38.927934</td>
      <td>42.655178</td>
      <td>47.546395</td>
      <td>64.428643</td>
    </tr>
    <tr>
      <th>eligable</th>
      <td>132.0</td>
      <td>0.301030</td>
      <td>0.078284</td>
      <td>0.073171</td>
      <td>0.248810</td>
      <td>0.293434</td>
      <td>0.359811</td>
      <td>0.497462</td>
    </tr>
    <tr>
      <th>scan_needle_mins_mu</th>
      <td>132.0</td>
      <td>39.683068</td>
      <td>12.020205</td>
      <td>19.086768</td>
      <td>30.691358</td>
      <td>37.401892</td>
      <td>45.949020</td>
      <td>92.147059</td>
    </tr>
    <tr>
      <th>scan_needle_mins_sigma</th>
      <td>132.0</td>
      <td>26.538991</td>
      <td>8.507326</td>
      <td>7.940403</td>
      <td>21.293485</td>
      <td>25.088262</td>
      <td>29.942953</td>
      <td>65.858529</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_mu</th>
      <td>132.0</td>
      <td>63.474563</td>
      <td>15.121720</td>
      <td>26.472222</td>
      <td>54.488376</td>
      <td>60.043478</td>
      <td>71.720339</td>
      <td>111.441558</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_sigma</th>
      <td>132.0</td>
      <td>32.814839</td>
      <td>8.395361</td>
      <td>8.195769</td>
      <td>27.883198</td>
      <td>32.228478</td>
      <td>36.453541</td>
      <td>69.820865</td>
    </tr>
    <tr>
      <th>onset_needle_mins_mu</th>
      <td>132.0</td>
      <td>158.393399</td>
      <td>13.147797</td>
      <td>127.000000</td>
      <td>149.722619</td>
      <td>156.531821</td>
      <td>166.692531</td>
      <td>189.662338</td>
    </tr>
    <tr>
      <th>onset_needle_mins_sigma</th>
      <td>132.0</td>
      <td>52.274870</td>
      <td>5.907052</td>
      <td>39.071523</td>
      <td>48.582379</td>
      <td>51.275398</td>
      <td>54.895491</td>
      <td>83.336167</td>
    </tr>
    <tr>
      <th>thrombolysis_after_180_min</th>
      <td>132.0</td>
      <td>0.309629</td>
      <td>0.093026</td>
      <td>0.080000</td>
      <td>0.250245</td>
      <td>0.289664</td>
      <td>0.356365</td>
      <td>0.588235</td>
    </tr>
    <tr>
      <th>thrombolysis_after_270_min</th>
      <td>132.0</td>
      <td>0.017742</td>
      <td>0.015162</td>
      <td>0.000000</td>
      <td>0.008063</td>
      <td>0.014728</td>
      <td>0.025703</td>
      <td>0.069853</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save summary to csv</span>
<span class="n">summary_by_hospital</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/pathway_summary_by_hopsital.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="analyse-for-all-patients-together">
<h2>Analyse for all patients together<a class="headerlink" href="#analyse-for-all-patients-together" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set all StrokeTeam to same</span>
<span class="n">single_group</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">single_group</span><span class="p">[</span><span class="s1">&#39;StrokeTeam&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;na&quot;</span>
<span class="n">analysis_all</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">single_group</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Add means to new DataFrame</span>
<span class="n">stats_by_age</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">stats_by_age</span><span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">analysis_all</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/pathway_summary_all.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="analysis-by-under-age-80-vs-80">
<h2>Analysis by under age 80 vs 80+<a class="headerlink" href="#analysis-by-under-age-80-vs-80" title="Permalink to this headline">#</a></h2>
<p>Repeat general and hospital level analysis by age stratification</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mask for under 80</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;MoreEqual80y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;No&#39;</span>
<span class="n">data_under_80</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="c1"># Mask for 80 plus</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;MoreEqual80y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span>
<span class="n">data_80_plus</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<section id="under-age-80">
<h3>Under age 80<a class="headerlink" href="#under-age-80" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">analysis_by_team_under_80</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">data_under_80</span><span class="p">)</span>
<span class="n">summary_by_hospital_under_80</span> <span class="o">=</span> <span class="n">analysis_by_team_under_80</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
<span class="n">summary_by_hospital_under_80</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>thrombolysis_rate</th>
      <td>132.0</td>
      <td>0.127182</td>
      <td>0.038002</td>
      <td>0.013064</td>
      <td>0.104283</td>
      <td>0.123472</td>
      <td>0.150482</td>
      <td>0.262436</td>
    </tr>
    <tr>
      <th>arrivals</th>
      <td>132.0</td>
      <td>1003.037879</td>
      <td>529.410379</td>
      <td>173.000000</td>
      <td>636.000000</td>
      <td>941.500000</td>
      <td>1286.500000</td>
      <td>3999.000000</td>
    </tr>
    <tr>
      <th>80_plus</th>
      <td>132.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_all</th>
      <td>132.0</td>
      <td>0.642800</td>
      <td>0.204014</td>
      <td>0.221030</td>
      <td>0.493693</td>
      <td>0.609459</td>
      <td>0.758040</td>
      <td>1.420674</td>
    </tr>
    <tr>
      <th>nihss_arrival_all</th>
      <td>132.0</td>
      <td>6.286699</td>
      <td>0.856764</td>
      <td>3.749164</td>
      <td>5.766698</td>
      <td>6.342502</td>
      <td>6.799700</td>
      <td>9.328110</td>
    </tr>
    <tr>
      <th>onset_known</th>
      <td>132.0</td>
      <td>0.679982</td>
      <td>0.130020</td>
      <td>0.377171</td>
      <td>0.588716</td>
      <td>0.660804</td>
      <td>0.760079</td>
      <td>0.985591</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs</th>
      <td>132.0</td>
      <td>0.584347</td>
      <td>0.090390</td>
      <td>0.222084</td>
      <td>0.537210</td>
      <td>0.594057</td>
      <td>0.649928</td>
      <td>0.807645</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs_all</th>
      <td>132.0</td>
      <td>0.389793</td>
      <td>0.060399</td>
      <td>0.212589</td>
      <td>0.351842</td>
      <td>0.391457</td>
      <td>0.423625</td>
      <td>0.544338</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_4hrs</th>
      <td>132.0</td>
      <td>0.617723</td>
      <td>0.214004</td>
      <td>0.148148</td>
      <td>0.462979</td>
      <td>0.597158</td>
      <td>0.752650</td>
      <td>1.443884</td>
    </tr>
    <tr>
      <th>nihss_arrival_4hrs</th>
      <td>132.0</td>
      <td>8.085814</td>
      <td>1.080190</td>
      <td>5.147959</td>
      <td>7.459996</td>
      <td>8.037950</td>
      <td>8.714991</td>
      <td>11.512821</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_mu</th>
      <td>132.0</td>
      <td>108.278108</td>
      <td>6.901565</td>
      <td>91.458333</td>
      <td>103.999891</td>
      <td>107.773886</td>
      <td>113.655551</td>
      <td>127.885057</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_sigma</th>
      <td>132.0</td>
      <td>52.352397</td>
      <td>2.714954</td>
      <td>46.708726</td>
      <td>50.718741</td>
      <td>52.128487</td>
      <td>53.906830</td>
      <td>61.943113</td>
    </tr>
    <tr>
      <th>scan_within_4_hrs</th>
      <td>132.0</td>
      <td>0.949423</td>
      <td>0.031731</td>
      <td>0.833333</td>
      <td>0.933499</td>
      <td>0.958696</td>
      <td>0.969423</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_mu</th>
      <td>132.0</td>
      <td>42.717327</td>
      <td>11.121473</td>
      <td>18.496907</td>
      <td>36.361292</td>
      <td>42.133225</td>
      <td>50.423320</td>
      <td>94.846667</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_sigma</th>
      <td>132.0</td>
      <td>43.169589</td>
      <td>7.199394</td>
      <td>26.084190</td>
      <td>38.407673</td>
      <td>43.699258</td>
      <td>47.659708</td>
      <td>66.206585</td>
    </tr>
    <tr>
      <th>eligable</th>
      <td>132.0</td>
      <td>0.334699</td>
      <td>0.083152</td>
      <td>0.073333</td>
      <td>0.279830</td>
      <td>0.333333</td>
      <td>0.391261</td>
      <td>0.524590</td>
    </tr>
    <tr>
      <th>scan_needle_mins_mu</th>
      <td>132.0</td>
      <td>40.224581</td>
      <td>12.107333</td>
      <td>18.303333</td>
      <td>32.081609</td>
      <td>38.742367</td>
      <td>46.597925</td>
      <td>93.260870</td>
    </tr>
    <tr>
      <th>scan_needle_mins_sigma</th>
      <td>132.0</td>
      <td>27.284895</td>
      <td>10.235558</td>
      <td>8.453550</td>
      <td>21.021526</td>
      <td>25.689491</td>
      <td>28.915382</td>
      <td>78.491646</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_mu</th>
      <td>132.0</td>
      <td>64.712453</td>
      <td>15.445930</td>
      <td>26.375000</td>
      <td>54.799590</td>
      <td>62.553309</td>
      <td>73.987337</td>
      <td>109.178571</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_sigma</th>
      <td>132.0</td>
      <td>34.256721</td>
      <td>10.043992</td>
      <td>8.365604</td>
      <td>28.970198</td>
      <td>32.771987</td>
      <td>37.719027</td>
      <td>83.959546</td>
    </tr>
    <tr>
      <th>onset_needle_mins_mu</th>
      <td>132.0</td>
      <td>159.157281</td>
      <td>13.620341</td>
      <td>120.600000</td>
      <td>149.626050</td>
      <td>157.045433</td>
      <td>168.504335</td>
      <td>191.566667</td>
    </tr>
    <tr>
      <th>onset_needle_mins_sigma</th>
      <td>132.0</td>
      <td>53.566155</td>
      <td>7.108638</td>
      <td>38.454895</td>
      <td>49.181509</td>
      <td>52.290158</td>
      <td>56.504757</td>
      <td>86.605961</td>
    </tr>
    <tr>
      <th>thrombolysis_after_180_min</th>
      <td>132.0</td>
      <td>0.316502</td>
      <td>0.094463</td>
      <td>0.000000</td>
      <td>0.252605</td>
      <td>0.301239</td>
      <td>0.375613</td>
      <td>0.565217</td>
    </tr>
    <tr>
      <th>thrombolysis_after_270_min</th>
      <td>132.0</td>
      <td>0.019459</td>
      <td>0.018550</td>
      <td>0.000000</td>
      <td>0.007233</td>
      <td>0.015268</td>
      <td>0.028169</td>
      <td>0.095238</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summary_by_hospital_under_80</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/pathway_summary_by_hopsital_under_80.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="c1"># Set all StrokeTeam to same</span>
<span class="n">single_group</span> <span class="o">=</span> <span class="n">data_under_80</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">single_group</span><span class="p">[</span><span class="s1">&#39;StrokeTeam&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;na&quot;</span>
<span class="n">analysis_all</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">single_group</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">stats_by_age</span><span class="p">[</span><span class="s1">&#39;under_80&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="aged-80">
<h3>Aged 80+<a class="headerlink" href="#aged-80" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">analysis_by_team_80_plus</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">data_80_plus</span><span class="p">)</span>
<span class="n">summary_by_hospital_80_plus</span> <span class="o">=</span> <span class="n">analysis_by_team_80_plus</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
<span class="n">summary_by_hospital_80_plus</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>thrombolysis_rate</th>
      <td>132.0</td>
      <td>0.097072</td>
      <td>0.037177</td>
      <td>0.015184</td>
      <td>0.071957</td>
      <td>0.090386</td>
      <td>0.118358</td>
      <td>0.227273</td>
    </tr>
    <tr>
      <th>arrivals</th>
      <td>132.0</td>
      <td>715.295455</td>
      <td>324.288269</td>
      <td>130.000000</td>
      <td>519.000000</td>
      <td>693.500000</td>
      <td>887.250000</td>
      <td>2119.000000</td>
    </tr>
    <tr>
      <th>80_plus</th>
      <td>132.0</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_all</th>
      <td>132.0</td>
      <td>1.582028</td>
      <td>0.329839</td>
      <td>0.799699</td>
      <td>1.355713</td>
      <td>1.583800</td>
      <td>1.794138</td>
      <td>2.464387</td>
    </tr>
    <tr>
      <th>nihss_arrival_all</th>
      <td>132.0</td>
      <td>8.949314</td>
      <td>1.154855</td>
      <td>5.969027</td>
      <td>8.166105</td>
      <td>8.990764</td>
      <td>9.807674</td>
      <td>12.285714</td>
    </tr>
    <tr>
      <th>onset_known</th>
      <td>132.0</td>
      <td>0.646519</td>
      <td>0.141493</td>
      <td>0.310705</td>
      <td>0.543596</td>
      <td>0.622715</td>
      <td>0.740186</td>
      <td>0.992000</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs</th>
      <td>132.0</td>
      <td>0.624133</td>
      <td>0.093277</td>
      <td>0.312377</td>
      <td>0.577418</td>
      <td>0.627499</td>
      <td>0.683352</td>
      <td>0.821990</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs_all</th>
      <td>132.0</td>
      <td>0.395484</td>
      <td>0.069188</td>
      <td>0.194872</td>
      <td>0.355810</td>
      <td>0.392473</td>
      <td>0.442737</td>
      <td>0.601429</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_4hrs</th>
      <td>132.0</td>
      <td>1.638257</td>
      <td>0.335931</td>
      <td>0.863830</td>
      <td>1.395506</td>
      <td>1.650321</td>
      <td>1.864107</td>
      <td>2.386986</td>
    </tr>
    <tr>
      <th>nihss_arrival_4hrs</th>
      <td>132.0</td>
      <td>10.546849</td>
      <td>1.371413</td>
      <td>6.688889</td>
      <td>9.689962</td>
      <td>10.640593</td>
      <td>11.557606</td>
      <td>13.642157</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_mu</th>
      <td>132.0</td>
      <td>113.772402</td>
      <td>7.520809</td>
      <td>88.483516</td>
      <td>109.819101</td>
      <td>113.890154</td>
      <td>119.189322</td>
      <td>138.846154</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_sigma</th>
      <td>132.0</td>
      <td>52.245901</td>
      <td>3.034150</td>
      <td>45.279315</td>
      <td>50.524577</td>
      <td>52.190029</td>
      <td>53.860620</td>
      <td>67.187195</td>
    </tr>
    <tr>
      <th>scan_within_4_hrs</th>
      <td>132.0</td>
      <td>0.945029</td>
      <td>0.032080</td>
      <td>0.828221</td>
      <td>0.929246</td>
      <td>0.947741</td>
      <td>0.966349</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_mu</th>
      <td>132.0</td>
      <td>43.433208</td>
      <td>12.746320</td>
      <td>15.293680</td>
      <td>33.818753</td>
      <td>43.487091</td>
      <td>51.689702</td>
      <td>90.817518</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_sigma</th>
      <td>132.0</td>
      <td>42.925626</td>
      <td>8.063562</td>
      <td>22.024223</td>
      <td>38.179966</td>
      <td>42.849548</td>
      <td>48.226897</td>
      <td>62.732866</td>
    </tr>
    <tr>
      <th>eligable</th>
      <td>132.0</td>
      <td>0.253801</td>
      <td>0.083254</td>
      <td>0.047297</td>
      <td>0.200000</td>
      <td>0.245084</td>
      <td>0.312157</td>
      <td>0.523077</td>
    </tr>
    <tr>
      <th>scan_needle_mins_mu</th>
      <td>132.0</td>
      <td>38.902157</td>
      <td>13.191973</td>
      <td>15.808989</td>
      <td>29.224436</td>
      <td>36.542609</td>
      <td>44.672101</td>
      <td>89.818182</td>
    </tr>
    <tr>
      <th>scan_needle_mins_sigma</th>
      <td>132.0</td>
      <td>24.271719</td>
      <td>9.058096</td>
      <td>7.718740</td>
      <td>19.062118</td>
      <td>22.987181</td>
      <td>27.544448</td>
      <td>63.516781</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_mu</th>
      <td>132.0</td>
      <td>61.413428</td>
      <td>16.096518</td>
      <td>26.550000</td>
      <td>51.892105</td>
      <td>58.293308</td>
      <td>68.292676</td>
      <td>117.476190</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_sigma</th>
      <td>132.0</td>
      <td>29.143830</td>
      <td>9.245836</td>
      <td>8.274724</td>
      <td>23.842572</td>
      <td>27.826304</td>
      <td>32.099727</td>
      <td>69.019784</td>
    </tr>
    <tr>
      <th>onset_needle_mins_mu</th>
      <td>132.0</td>
      <td>157.229189</td>
      <td>15.530805</td>
      <td>120.300000</td>
      <td>148.107065</td>
      <td>154.422078</td>
      <td>165.543783</td>
      <td>198.809524</td>
    </tr>
    <tr>
      <th>onset_needle_mins_sigma</th>
      <td>132.0</td>
      <td>49.224555</td>
      <td>8.075909</td>
      <td>25.569296</td>
      <td>44.276242</td>
      <td>49.327607</td>
      <td>52.665629</td>
      <td>82.577511</td>
    </tr>
    <tr>
      <th>thrombolysis_after_180_min</th>
      <td>132.0</td>
      <td>0.300602</td>
      <td>0.126670</td>
      <td>0.000000</td>
      <td>0.222222</td>
      <td>0.274205</td>
      <td>0.362623</td>
      <td>0.681818</td>
    </tr>
    <tr>
      <th>thrombolysis_after_270_min</th>
      <td>132.0</td>
      <td>0.015137</td>
      <td>0.020425</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.007547</td>
      <td>0.026059</td>
      <td>0.095238</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summary_by_hospital_80_plus</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/pathway_summary_by_hopsital_80_plus.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="c1"># Set all StrokeTeam to same</span>
<span class="n">single_group</span> <span class="o">=</span> <span class="n">data_80_plus</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">single_group</span><span class="p">[</span><span class="s1">&#39;StrokeTeam&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;na&quot;</span>
<span class="n">analysis_all</span> <span class="o">=</span> <span class="n">analyse_by_team</span><span class="p">(</span><span class="n">single_group</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">stats_by_age</span><span class="p">[</span><span class="s1">&#39;80+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Show comparison of means by age group</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stats_by_age</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;output/summary_by_age_group.csv&#39;</span><span class="p">)</span>
<span class="n">stats_by_age</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>all</th>
      <th>under_80</th>
      <th>80+</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>stroke_team</th>
      <td>na</td>
      <td>na</td>
      <td>na</td>
    </tr>
    <tr>
      <th>thrombolysis_rate</th>
      <td>0.118239</td>
      <td>0.130445</td>
      <td>0.101124</td>
    </tr>
    <tr>
      <th>arrivals</th>
      <td>226820</td>
      <td>132401</td>
      <td>94419</td>
    </tr>
    <tr>
      <th>80_plus</th>
      <td>0.423219</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_all</th>
      <td>1.047315</td>
      <td>0.654225</td>
      <td>1.598534</td>
    </tr>
    <tr>
      <th>nihss_arrival_all</th>
      <td>7.46584</td>
      <td>6.363859</td>
      <td>9.059266</td>
    </tr>
    <tr>
      <th>onset_known</th>
      <td>0.668596</td>
      <td>0.681943</td>
      <td>0.64988</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs</th>
      <td>0.586399</td>
      <td>0.568081</td>
      <td>0.613354</td>
    </tr>
    <tr>
      <th>known_arrival_within_4hrs_all</th>
      <td>0.392064</td>
      <td>0.387399</td>
      <td>0.398606</td>
    </tr>
    <tr>
      <th>rankin_before_stroke_4hrs</th>
      <td>1.059689</td>
      <td>0.623704</td>
      <td>1.653869</td>
    </tr>
    <tr>
      <th>nihss_arrival_4hrs</th>
      <td>9.214728</td>
      <td>8.178815</td>
      <td>10.66594</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_mu</th>
      <td>111.392722</td>
      <td>109.258422</td>
      <td>114.30144</td>
    </tr>
    <tr>
      <th>onset_arrival_mins_sigma</th>
      <td>52.729071</td>
      <td>52.840638</td>
      <td>52.437656</td>
    </tr>
    <tr>
      <th>scan_within_4_hrs</th>
      <td>0.94789</td>
      <td>0.949953</td>
      <td>0.945079</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_mu</th>
      <td>42.101407</td>
      <td>41.584525</td>
      <td>42.809469</td>
    </tr>
    <tr>
      <th>arrival_scan_mins_sigma</th>
      <td>44.793795</td>
      <td>44.568632</td>
      <td>45.091427</td>
    </tr>
    <tr>
      <th>eligable</th>
      <td>0.311363</td>
      <td>0.346537</td>
      <td>0.263179</td>
    </tr>
    <tr>
      <th>scan_needle_mins_mu</th>
      <td>35.955574</td>
      <td>36.509091</td>
      <td>34.957163</td>
    </tr>
    <tr>
      <th>scan_needle_mins_sigma</th>
      <td>28.380323</td>
      <td>29.290013</td>
      <td>26.633541</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_mu</th>
      <td>58.816315</td>
      <td>60.017234</td>
      <td>56.650144</td>
    </tr>
    <tr>
      <th>arrival_needle_mins_sigma</th>
      <td>35.162372</td>
      <td>36.656941</td>
      <td>32.180851</td>
    </tr>
    <tr>
      <th>onset_needle_mins_mu</th>
      <td>155.77768</td>
      <td>156.465147</td>
      <td>154.537656</td>
    </tr>
    <tr>
      <th>onset_needle_mins_sigma</th>
      <td>54.035606</td>
      <td>55.238587</td>
      <td>51.774937</td>
    </tr>
    <tr>
      <th>thrombolysis_after_180_min</th>
      <td>0.295016</td>
      <td>0.303109</td>
      <td>0.280419</td>
    </tr>
    <tr>
      <th>thrombolysis_after_270_min</th>
      <td>0.016726</td>
      <td>0.0183</td>
      <td>0.013887</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="summary-figure">
<h2>Summary figure<a class="headerlink" href="#summary-figure" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">))</span>

<span class="c1"># Subplot 1: Histogram of thrombolysis rate</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">321</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;thrombolysis_rate&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Thrombolysis use (%)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;A. Thrombolysis use</span><span class="se">\n</span><span class="s1">(all admissions)&#39;</span><span class="p">)</span>

<span class="c1"># Subplot 2: Histogram of thrombolysis rate for patients arriving in 4 hours</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">322</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;eligable&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Thrombolysis use (%)&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;B. Thrombolysis use</span><span class="se">\n</span><span class="s1">(arrivals within 4 hours of known onset)&#39;</span><span class="p">)</span>

<span class="c1"># Subplot 3: Histogram of proportion of patients with known onset</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">323</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;onset_known&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Proportion of patients with known onset (%)&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;C. Proportion of patients with known onset&#39;</span><span class="p">)</span>

<span class="c1"># Subplot 4: Histogram of mean Arrival to scan times</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">324</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;arrival_scan_mins_mu&#39;</span><span class="p">]</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Mean arrival to scan (minutes)&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;D. Mean arrival to scan time for patients</span>
<span class="s1">arriving within 4 hours of known onset and</span>
<span class="s1">receiving scan within 4 hours of arrival&#39;&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Subplot 5: Histogram of mean scan to needle times</span>
<span class="n">ax5</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">325</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;scan_needle_mins_mu&#39;</span><span class="p">]</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Mean scan to needle (minutes)&#39;</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax5</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;E. Mean scan to needle time&#39;</span><span class="p">)</span>

<span class="c1"># Subplot 6: Histogram of mean arrival to needle times</span>
<span class="n">ax6</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">326</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">analysis_by_team</span><span class="p">[</span><span class="s1">&#39;arrival_needle_mins_mu&#39;</span><span class="p">]</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Mean arrival to needle (minutes)&#39;</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of hospitals&#39;</span><span class="p">)</span>
<span class="n">ax6</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;F. Mean arrival to needle time&#39;</span><span class="p">)</span>

<span class="c1"># Save and show</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">pad</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;output/pathway_summary_six_histograms.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/01_descriptive_37_0.png" src="../_images/01_descriptive_37_0.png" />
</div>
</div>
</section>
<section id="analysis-of-stroke-severity">
<h2>Analysis of stroke severity<a class="headerlink" href="#analysis-of-stroke-severity" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restrict to known NIHSS</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<span class="n">known_NIHSS</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">known_NIHSS</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>
<span class="n">counts</span><span class="p">[</span><span class="s1">&#39;cum_sum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">])</span>
<span class="n">counts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>S2NihssArrival</th>
      <th>cum_sum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>14658</td>
      <td>14658</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>21117</td>
      <td>35775</td>
    </tr>
    <tr>
      <th>2.0</th>
      <td>27521</td>
      <td>63296</td>
    </tr>
    <tr>
      <th>3.0</th>
      <td>22765</td>
      <td>86061</td>
    </tr>
    <tr>
      <th>4.0</th>
      <td>18955</td>
      <td>105016</td>
    </tr>
    <tr>
      <th>5.0</th>
      <td>14686</td>
      <td>119702</td>
    </tr>
    <tr>
      <th>6.0</th>
      <td>11783</td>
      <td>131485</td>
    </tr>
    <tr>
      <th>7.0</th>
      <td>9334</td>
      <td>140819</td>
    </tr>
    <tr>
      <th>8.0</th>
      <td>7519</td>
      <td>148338</td>
    </tr>
    <tr>
      <th>9.0</th>
      <td>5987</td>
      <td>154325</td>
    </tr>
    <tr>
      <th>10.0</th>
      <td>5322</td>
      <td>159647</td>
    </tr>
    <tr>
      <th>11.0</th>
      <td>4675</td>
      <td>164322</td>
    </tr>
    <tr>
      <th>12.0</th>
      <td>4102</td>
      <td>168424</td>
    </tr>
    <tr>
      <th>13.0</th>
      <td>3649</td>
      <td>172073</td>
    </tr>
    <tr>
      <th>14.0</th>
      <td>3513</td>
      <td>175586</td>
    </tr>
    <tr>
      <th>15.0</th>
      <td>3292</td>
      <td>178878</td>
    </tr>
    <tr>
      <th>16.0</th>
      <td>3190</td>
      <td>182068</td>
    </tr>
    <tr>
      <th>17.0</th>
      <td>3171</td>
      <td>185239</td>
    </tr>
    <tr>
      <th>18.0</th>
      <td>3058</td>
      <td>188297</td>
    </tr>
    <tr>
      <th>19.0</th>
      <td>2953</td>
      <td>191250</td>
    </tr>
    <tr>
      <th>20.0</th>
      <td>2747</td>
      <td>193997</td>
    </tr>
    <tr>
      <th>21.0</th>
      <td>2484</td>
      <td>196481</td>
    </tr>
    <tr>
      <th>22.0</th>
      <td>2316</td>
      <td>198797</td>
    </tr>
    <tr>
      <th>23.0</th>
      <td>2056</td>
      <td>200853</td>
    </tr>
    <tr>
      <th>24.0</th>
      <td>1955</td>
      <td>202808</td>
    </tr>
    <tr>
      <th>25.0</th>
      <td>1673</td>
      <td>204481</td>
    </tr>
    <tr>
      <th>26.0</th>
      <td>1483</td>
      <td>205964</td>
    </tr>
    <tr>
      <th>27.0</th>
      <td>1204</td>
      <td>207168</td>
    </tr>
    <tr>
      <th>28.0</th>
      <td>1040</td>
      <td>208208</td>
    </tr>
    <tr>
      <th>29.0</th>
      <td>705</td>
      <td>208913</td>
    </tr>
    <tr>
      <th>30.0</th>
      <td>579</td>
      <td>209492</td>
    </tr>
    <tr>
      <th>31.0</th>
      <td>439</td>
      <td>209931</td>
    </tr>
    <tr>
      <th>32.0</th>
      <td>398</td>
      <td>210329</td>
    </tr>
    <tr>
      <th>33.0</th>
      <td>284</td>
      <td>210613</td>
    </tr>
    <tr>
      <th>34.0</th>
      <td>247</td>
      <td>210860</td>
    </tr>
    <tr>
      <th>35.0</th>
      <td>191</td>
      <td>211051</td>
    </tr>
    <tr>
      <th>36.0</th>
      <td>169</td>
      <td>211220</td>
    </tr>
    <tr>
      <th>37.0</th>
      <td>139</td>
      <td>211359</td>
    </tr>
    <tr>
      <th>38.0</th>
      <td>159</td>
      <td>211518</td>
    </tr>
    <tr>
      <th>39.0</th>
      <td>77</td>
      <td>211595</td>
    </tr>
    <tr>
      <th>40.0</th>
      <td>146</td>
      <td>211741</td>
    </tr>
    <tr>
      <th>41.0</th>
      <td>40</td>
      <td>211781</td>
    </tr>
    <tr>
      <th>42.0</th>
      <td>311</td>
      <td>212092</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="n">total</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">total</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;cum_sum&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">total</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.14</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion of all patients&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;NIHSS&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">45</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">42</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>

<span class="c1"># Add cumsum to second axis</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span> 
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Cumulative sum&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.02</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.01</span><span class="p">,</span><span class="mf">0.1</span><span class="p">))</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">42</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cumulative proportion of all patients&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;output/nihss_count.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/01_descriptive_40_0.png" src="../_images/01_descriptive_40_0.png" />
</div>
</div>
</section>
<section id="analyse-onset-to-arrival-times">
<h2>Analyse onset-to-arrival times<a class="headerlink" href="#analyse-onset-to-arrival-times" title="Permalink to this headline">#</a></h2>
<p>All arrivals</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count patients with determined NIHSS</span>
<span class="n">total_with_determined_nihss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">proportion_with_determined_nihss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Restrict to known onset</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Precise&#39;</span><span class="p">,</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">data_known_onset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">prop_known_onset_all</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Get counts of arrival times, up to 12 hours, in 30 min bins</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">721</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">arrivals_all</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data_known_onset</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="p">)</span>
<span class="n">prop_arrivals_in_12_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arrivals_all</span><span class="p">)</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_all_arrivals</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">df_all_arrivals</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span>
<span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All arrivals:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proporotion of arrivals with determmined NIHSS: </span><span class="si">{</span><span class="n">proportion_with_determined_nihss</span><span class="si">:</span><span class="s1">0.3</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of arrivals with known stroke onset: </span><span class="si">{</span><span class="n">prop_known_onset_all</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion known stroke onset arriving within 12 hours: </span><span class="si">{</span><span class="n">prop_arrivals_in_12_hours</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">df_all_arrivals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>All arrivals:
-------------
Proporotion of arrivals with determmined NIHSS: 0.935
Proportion of arrivals with known stroke onset: 0.669
Proportion known stroke onset arriving within 12 hours: 0.799
                     Counts  Prop known onset  Cumulatative prop
Arrival bin (upper)                                             
30                     1819          0.011995           0.011995
60                    11283          0.074401           0.086396
90                    23536          0.155198           0.241594
120                   18806          0.124008           0.365603
150                   12402          0.081780           0.447382
180                    8791          0.057969           0.505351
210                    6731          0.044385           0.549736
240                    5283          0.034837           0.584572
270                    4344          0.028645           0.613217
300                    3653          0.024088           0.637305
330                    3133          0.020659           0.657965
360                    2767          0.018246           0.676211
390                    2486          0.016393           0.692603
420                    2109          0.013907           0.706510
450                    1968          0.012977           0.719488
480                    1690          0.011144           0.730632
510                    1599          0.010544           0.741175
540                    1454          0.009588           0.750763
570                    1376          0.009073           0.759837
600                    1235          0.008144           0.767980
630                    1202          0.007926           0.775907
660                    1163          0.007669           0.783575
690                    1136          0.007491           0.791066
720                    1158          0.007636           0.798702
</pre></div>
</div>
</div>
</div>
<p>Mild stroke (NIHSS &lt;= 5)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion mild stroke</span>
<span class="n">mild</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&lt;=</span><span class="mi">5</span>
<span class="n">prop_mild</span> <span class="o">=</span> <span class="n">mild</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion mild </span><span class="si">{</span><span class="n">prop_mild</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Proportion mild 0.53
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restrict to NIHSS &lt;5</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&lt;=</span><span class="mi">5</span>
<span class="n">data_mild</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">proportion_mild_stroke</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">total_with_determined_nihss</span>

<span class="c1"># Restrict to known onset</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Precise&#39;</span><span class="p">,</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data_mild</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">data_known_onset</span> <span class="o">=</span> <span class="n">data_mild</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">prop_known_onset_mild</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Get counts of arrival times, up to 12 hours, in 30 min bins</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">721</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">arrivals_all</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data_known_onset</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="p">)</span>
<span class="n">prop_arrivals_in_12_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arrivals_all</span><span class="p">)</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_mild_arrivals</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">df_mild_arrivals</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span>
<span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mild stroke (NIHSS &lt;= 5):&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of all arrivals, with determined NIHSS, with mild stroke: </span><span class="si">{</span><span class="n">proportion_mild_stroke</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of arrivals with known stroke onset: </span><span class="si">{</span><span class="n">prop_known_onset_mild</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion known stroke onset arriving within 12 hours: </span><span class="si">{</span><span class="n">prop_arrivals_in_12_hours</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">df_mild_arrivals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mild stroke (NIHSS &lt;= 5):
-------------------------
Proportion of all arrivals, with determined NIHSS, with mild stroke: 0.564
Proportion of arrivals with known stroke onset: 0.645
Proportion known stroke onset arriving within 12 hours: 0.723
                     Counts  Prop known onset  Cumulatative prop
Arrival bin (upper)                                             
30                      810          0.010485           0.010485
60                     3767          0.048760           0.059245
90                     8347          0.108043           0.167288
120                    7769          0.100562           0.267850
150                    5840          0.075593           0.343443
180                    4290          0.055530           0.398972
210                    3464          0.044838           0.443810
240                    2807          0.036334           0.480144
270                    2369          0.030664           0.510808
300                    2010          0.026017           0.536826
330                    1760          0.022781           0.559607
360                    1545          0.019998           0.579605
390                    1409          0.018238           0.597844
420                    1240          0.016051           0.613894
450                    1204          0.015585           0.629479
480                     975          0.012620           0.642099
510                     978          0.012659           0.654758
540                     895          0.011585           0.666343
570                     843          0.010912           0.677255
600                     759          0.009824           0.687079
630                     743          0.009617           0.696697
660                     697          0.009022           0.705719
690                     681          0.008815           0.714533
720                     682          0.008828           0.723361
</pre></div>
</div>
</div>
</div>
<p>Non-mild stroke (NIHSS &gt; 5)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Proportion non-mild stroke</span>
<span class="n">non_mild</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">5</span>
<span class="n">prop_non_mild</span> <span class="o">=</span> <span class="n">non_mild</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion non-mild </span><span class="si">{</span><span class="n">prop_non_mild</span><span class="si">:</span><span class="s1">0.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Proportion non-mild 0.41
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restrict to NIHSS &gt;5</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">5</span>
<span class="n">data_not_mild</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">proportion_not_mild_stroke</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">total_with_determined_nihss</span>

<span class="c1"># Restrict to known onset</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Precise&#39;</span><span class="p">,</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data_not_mild</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">data_known_onset</span> <span class="o">=</span> <span class="n">data_not_mild</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">prop_known_onset_not_mild</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Get counts of arrival times, up to 12 hours, in 30 min bins</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">721</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">arrivals_all</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data_known_onset</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="p">)</span>
<span class="n">prop_arrivals_in_12_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arrivals_all</span><span class="p">)</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_not_mild_arrivals</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">df_not_mild_arrivals</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span>
<span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span>
    <span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Non-mild stroke (NIHSS &gt;5):&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of arrivals with known stroke onset: </span><span class="si">{</span><span class="n">prop_known_onset_not_mild</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of all arrivals, with determined NIHSS, with NIHSS &gt;5: </span><span class="si">{</span><span class="n">proportion_not_mild_stroke</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion known stroke onset arriving within 12 hours: </span><span class="si">{</span><span class="n">prop_arrivals_in_12_hours</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">df_not_mild_arrivals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Non-mild stroke (NIHSS &gt;5):
-------------------------
Proportion of arrivals with known stroke onset: 0.715
Proportion of all arrivals, with determined NIHSS, with NIHSS &gt;5: 0.436
Proportion known stroke onset arriving within 12 hours: 0.883
                     Counts  Prop known onset  Cumulatative prop
Arrival bin (upper)                                             
30                      915          0.013852           0.013852
60                     6813          0.103141           0.116993
90                    13655          0.206722           0.323715
120                    9899          0.149860           0.473575
150                    5874          0.088926           0.562501
180                    4058          0.061434           0.623935
210                    2920          0.044206           0.668140
240                    2238          0.033881           0.702021
270                    1756          0.026584           0.728605
300                    1421          0.021512           0.750117
330                    1220          0.018469           0.768587
360                    1067          0.016153           0.784740
390                     949          0.014367           0.799107
420                     750          0.011354           0.810461
450                     654          0.009901           0.820362
480                     631          0.009553           0.829914
510                     537          0.008130           0.838044
540                     473          0.007161           0.845205
570                     465          0.007040           0.852244
600                     406          0.006146           0.858391
630                     394          0.005965           0.864355
660                     398          0.006025           0.870381
690                     396          0.005995           0.876376
720                     413          0.006252           0.882628
</pre></div>
</div>
</div>
</div>
<p>NIHSS &gt;10</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restrict to NIHSS &gt;10</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">10</span>
<span class="n">data_nihss_11plus</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">proportion__11plus</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">total_with_determined_nihss</span>

<span class="c1"># Restrict to known onset</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Precise&#39;</span><span class="p">,</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">data_nihss_11plus</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">data_known_onset</span> <span class="o">=</span> <span class="n">data_nihss_11plus</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="n">prop_known_onset_11plus</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Get counts of arrival times, up to 12 hours, in 30 min bins</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">721</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">arrivals_all</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">data_known_onset</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="p">)</span>
<span class="n">prop_arrivals_in_12_hours</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arrivals_all</span><span class="p">)</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_arrivals_11plus</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">df_arrivals_11plus</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Arrival bin (upper)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span>
<span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrivals_all</span> <span class="o">/</span> <span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span>
    <span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Prop known onset&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Non-mild stroke (NIHSS &gt;10):&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of arrivals with known stroke onset: </span><span class="si">{</span><span class="n">prop_known_onset_11plus</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of all arrivals, with determined NIHSS, with NIHH &gt;10: </span><span class="si">{</span><span class="n">proportion__11plus</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion known stroke onset arriving within 12 hours: </span><span class="si">{</span><span class="n">prop_arrivals_in_12_hours</span><span class="si">:</span><span class="s1">0.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">df_arrivals_11plus</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Non-mild stroke (NIHSS &gt;10):
-------------------------
Proportion of arrivals with known stroke onset: 0.726
Proportion of all arrivals, with determined NIHSS, with NIHH &gt;10: 0.247
Proportion known stroke onset arriving within 12 hours: 0.910
                     Counts  Prop known onset  Cumulatative prop
Arrival bin (upper)                                             
30                      543          0.014264           0.014264
60                     4644          0.121992           0.136256
90                     8890          0.233529           0.369786
120                    6076          0.159609           0.529395
150                    3409          0.089550           0.618945
180                    2281          0.059919           0.678864
210                    1586          0.041662           0.720526
240                    1222          0.032100           0.752627
270                     951          0.024982           0.777608
300                     739          0.019413           0.797021
330                     641          0.016838           0.813859
360                     549          0.014422           0.828281
390                     466          0.012241           0.840522
420                     357          0.009378           0.849900
450                     305          0.008012           0.857912
480                     326          0.008564           0.866476
510                     276          0.007250           0.873726
540                     228          0.005989           0.879715
570                     208          0.005464           0.885179
600                     190          0.004991           0.890170
630                     173          0.004544           0.894715
660                     192          0.005044           0.899758
690                     188          0.004939           0.904697
720                     197          0.005175           0.909872
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up figure</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">df_all_arrivals</span><span class="o">.</span><span class="n">index</span>
<span class="n">x</span> <span class="o">-=</span> <span class="mi">15</span> <span class="c1"># plot at centre of bin</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">df_all_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">df_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span>
<span class="n">y3</span> <span class="o">=</span> <span class="n">df_not_mild_arrivals</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span>
<span class="n">y4</span> <span class="o">=</span> <span class="n">df_arrivals_11plus</span><span class="p">[</span><span class="s1">&#39;Cumulatative prop&#39;</span><span class="p">]</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;All arrivals&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;NIHSS &lt;= 5&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;NIHSS &gt;5&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;NIHSS &gt;10&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Onset to arrival (minutes)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion of patients (with known onset)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">720</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;Proportion all arrivals with known onset </span><span class="si">{</span><span class="n">prop_known_onset_all</span><span class="si">:</span><span class="s1">0.3</span><span class="si">}</span><span class="s1"></span>
<span class="s1">Proportion NIHSS &lt;=5 arrivals with known onset </span><span class="si">{</span><span class="n">prop_known_onset_mild</span><span class="si">:</span><span class="s1">0.3</span><span class="si">}</span><span class="s1"></span>
<span class="s1">Proportion NIHSS &gt;5 arrivals with known onset </span><span class="si">{</span><span class="n">prop_known_onset_not_mild</span><span class="si">:</span><span class="s1">0.3</span><span class="si">}</span><span class="s1"></span>
<span class="s1">Proportion NIHSS &gt;10 arrivals with known onset </span><span class="si">{</span><span class="n">prop_known_onset_11plus</span><span class="si">:</span><span class="s1">0.3</span><span class="si">}</span><span class="s1">&#39;&#39;&#39;</span>
<span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s1">&#39;square&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;output/onset_to_arrival.jpg&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/01_descriptive_52_0.png" src="../_images/01_descriptive_52_0.png" />
</div>
</div>
</section>
<section id="queries-on-time-of-arrival-and-nihss-for-patients-who-receive-thrombolysis">
<h2>Queries on time of arrival and NIHSS for patients who receive thrombolysis<a class="headerlink" href="#queries-on-time-of-arrival-and-nihss-for-patients-who-receive-thrombolysis" title="Permalink to this headline">#</a></h2>
<p>See also later section on comparison of average values for patients who receive thrombolysis and those that do not (though that data is for patients who arrive within 4 hours of known stroke onset)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_thrombolysed</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;S2Thrombolysis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Yes&#39;</span><span class="p">]</span>
<span class="n">thrombolysed</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="c1"># Onset known</span>
<span class="n">onset_known</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Precise&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S1OnsetTimeType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Best estimate&#39;</span><span class="p">)</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;onset known&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">onset_known</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Arrival within 4 hours</span>
<span class="n">arrive_4_hours</span> <span class="o">=</span> <span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">240</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;arrive within 4 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrive_4_hours</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Arrival within 6 hours</span>
<span class="n">arrive_6_hours</span> <span class="o">=</span> <span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S1OnsetToArrival_min&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">360</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;arrive within 6 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arrive_6_hours</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># NIHSS &gt;5</span>
<span class="n">nihss_greater_5</span> <span class="o">=</span> <span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">5</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 6+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_5</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">nihss_greater_5_arrival_4_hrs</span> <span class="o">=</span> <span class="n">nihss_greater_5</span> <span class="o">&amp;</span> <span class="n">arrive_4_hours</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 6+ and arrive in 4 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_5_arrival_4_hrs</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">nihss_greater_5_arrival_6_hrs</span> <span class="o">=</span> <span class="n">nihss_greater_5</span> <span class="o">&amp;</span> <span class="n">arrive_6_hours</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 6+ and arrive in 6 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_5_arrival_6_hrs</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># NIHSS &gt;10</span>
<span class="n">nihss_greater_10</span> <span class="o">=</span> <span class="n">data_thrombolysed</span><span class="p">[</span><span class="s1">&#39;S2NihssArrival&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">10</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 11+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_10</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">nihss_greater_10_arrival_4_hrs</span> <span class="o">=</span> <span class="n">nihss_greater_10</span> <span class="o">&amp;</span> <span class="n">arrive_4_hours</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 11+ and arrive in 4 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_10_arrival_4_hrs</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">nihss_greater_10_arrival_6_hrs</span> <span class="o">=</span> <span class="n">nihss_greater_10</span> <span class="o">&amp;</span> <span class="n">arrive_6_hours</span>
<span class="n">thrombolysed</span><span class="p">[</span><span class="s1">&#39;nihss 11+ and arrive in 6 hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nihss_greater_10_arrival_6_hrs</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">thrombolysed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">thrombolysed</span><span class="p">)</span>
<span class="n">thrombolysed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>onset known                        0.988926
arrive within 4 hours              0.979045
arrive within 6 hours              0.987211
nihss 6+                           0.739252
nihss 6+ and arrive in 4 hours     0.723330
nihss 6+ and arrive in 6 hours     0.729520
nihss 11+                          0.451247
nihss 11+ and arrive in 4 hours    0.440807
nihss 11+ and arrive in 6 hours    0.444573
dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="general-observations">
<h2>General observations<a class="headerlink" href="#general-observations" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>There are 239,505 admissions (2016-2018) to 132 stroke teams that receive at least 300 admissions and provide thrombolysis to at least 10 patients over the course of three years (2016-2018).</p></li>
<li><p>5.3% of patients have an in-hospital stroke onset; 12.3% receive thrombolysis. 94.7% of patients have an out-of-hospital stroke onset; 11.8% receive thrombolysis.</p></li>
</ul>
<p>The following statistic apply to out-of-hospital onset stroke patients only</p>
<ul class="simple">
<li><p>43% of arrivals are aged 80 or more.</p></li>
<li><p>67% of all patients have a determined stroke time of onset, 60% of whom arrive within 4 hours of known stroke onset. 40% of all arrivals arrive within 4 hours of known stroke onset.</p></li>
<li><p>The average NIHSS (stroke severity) is 7.4</p></li>
</ul>
<p>Of those arriving within 4 hours of known stroke onset:</p>
<ul class="simple">
<li><p>The average onset-to-arrival time is 111 minutes.</p></li>
<li><p>95% receive a scan within 4 hours of arrival, with an average arrival-to-scan time of 43 minutes.</p></li>
<li><p>30% of those who receive a scan within 4 hours of known stroke onset, and 11.8% of all arrivals, receive thrombolysis. The average scan-to-needle time is 40 minutes, the average arrival-to-needle time is 63 minutes, and the average onset-to-needle time is 158 minutes.</p></li>
</ul>
<p>On inter-hospital variation:</p>
<ul class="simple">
<li><p>Thrombolysis use varies from 1.5% to 24.3% of all patients, and 7.3% to 49.7% of patients arriving within 4 hours of known stroke onset.</p></li>
<li><p>The proportion of determined stroke onsets ranges from 34% to 99%.</p></li>
<li><p>The proportion of patients arriving within 4 hours of known stroke onset ranges from 22% to 56%.</p></li>
<li><p>The proportion of patients scanned within 4 hours of arrival ranges from 85% to 100%.</p></li>
<li><p>Average arrival-to-scan (for those arriving within 4 hours of known stroke onset and scanned within 4 hours of arrival) ranges from 19 to 93 minutes.</p></li>
<li><p>Average arrival-to-needle time varies from 26 to 111 minutes.</p></li>
<li><p>The proportion of patients aged 80+ varies from 29% to 58%.</p></li>
<li><p>The average NIHSS (stroke severity) ranges from 6.1 to 11.7.</p></li>
</ul>
<p>On differences by age group (under age 80 years vs 80+):</p>
<ul class="simple">
<li><p>10.1% of arrivals aged 80+ receive thrombolysis, c.f. 13.0% of those under age 80.</p></li>
<li><p>39% of arrivals aged 80+ arrive within 4 hours of known stroke onset, c.f. 40% of those under age 80.</p></li>
<li><p>The average disability (Rankin) before stroke is 1.7 for those aged 80+, c.f. 0.6 for those under age 80.</p></li>
<li><p>The average stroke severity (NIHSS) on arrival is 10.7 for those aged 80+, c.f. 8.2 for those under age 80.</p></li>
<li><p>Of those scanned within 4 hours, 26.3% of those aged 80+ receive thrombolysis, c.f. 34.7% of those under age 80.</p></li>
</ul>
<p>On onset-to-arrival times</p>
<ul class="simple">
<li><p>Those with non-mild stroke (NINHSS &gt;5) tend to arrive earlier than mild stroke (NIHSS &lt;=5). For example, of those with known stroke onset time, 70% and 79% of those with non-mild stroke arrive within 4 and 6 hours from onset. The same results for mild stroke patients are 48% and 58%. Non-mild stroke are also more likely to have a determined time of onset compared to mild stroke (72% vs 65%).</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./descriptive_stats"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="outline.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Outline - what is in this section?</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="04_thrombolysis_general.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Association between patient features on use of thrombolysis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By SAMueL project team<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>