
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SAMueL - Summary of Findings &#8212; SAMueL-1 Stroke Audit Machine Learning</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Project team" href="project_team.html" />
    <link rel="prev" title="Plain English Summary" href="plain_english.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      <h1 class="site-logo" id="site-title">SAMueL-1 Stroke Audit Machine Learning</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction to SAMueL-1
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Summary
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="plain_english.html">
   Plain English Summary
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   SAMueL - Summary of Findings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="project_team.html">
   Project team
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data and software
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data.html">
   Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="software.html">
   Software
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Descriptive statistics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../descriptive_stats/outline.html">
   Outline - what is in this section?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/01_descriptive.html">
     Descriptive analysis of stroke pathway data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/04_thrombolysis_general.html">
     Association between patient features on use of thrombolysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/05_thrombolysis_comparison.html">
     Comparison of average values for patients who receive thrombolysis and those that do not
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/02a_daily_patterns.html">
     Pathway patterns throughout the day
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/02b_weekly_patterns.html">
     Pathway patterns throughout the week
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/03a_daily_patterns_single_team.html">
     Pathway patterns throughout the day in an example single stroke team
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/03b_weekly_patterns_single_team.html">
     Pathway patterns throughout the week in an example single stroke team
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../descriptive_stats/06_distributions.html">
     Stroke pathway timing distribution
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../logistic_regression/outline.html">
   Logistic Regression
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../logistic_regression/logistic_regression_single_fit.html">
     Logistic Regression Classifier - Fitting to all stroke teams together
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../logistic_regression/logistic_regression_hospit_fit_accuracy.html">
     Logistic Regression Classifier - Fitting hospital-specific models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../random_forest/outline.html">
   Random Forests
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_single_fit.html">
     Random Forest Classifier - Fitting to all stroke teams together
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_hospital_fit_accuracy.html">
     Random Forest Classifier - Fitting hospital-specific models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_train_save_hospital_models.html">
     Train and save hospital-level models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_compare_hospital.html">
     Compare level of agreement in clinical decison making between hospitals using Random Forests models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_benchmark_hospitals.html">
     Benchmark hospitals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_compare_highest_thrombolysing_with_benchmark.html">
     How would thrombolysis use change if clinical decisions were made by hospitals with the highest current thrombolysis rate?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/random_forest_cohort_distance.html">
     Grouping hospitals by similarities in decision making
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/create_vignette_dataset.html">
     Patient level decisions at own hospital, and consensus decisions at other other hospitals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/vignettes.html">
     Thrombolysis hospital vs. benchmark diagrams and patient vignettes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../random_forest/within_hospital_variability.html">
     Find similar patients who are treated differently within the same hospital
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../neural_net/outline.html">
   Neural Networks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001a_fully_connected_fit_check_training_time.html">
     Fully connected TensorFlow model - Check required training epochs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001b_fully_connected_fit.html">
     Fully connected TensorFlow model - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001c_fully_connect_analyse.html">
     Fully connected TensorFlow model - analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/001d_learning_curve.html">
     Fully connected TensorFlow model - Learning curve
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/002b_1d_modular_fit.html">
     Modular TensorFlow model with 1D embedding - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/002c_1d_modular_analyse.html">
     Modular TensorFlow model with 1D embedding - analyse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/003a_2d_modular_fit.html">
     Modular TensorFlow model with 2D embedding - Train and save models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/003b_2d_modular_analyse.html">
     Modular TensorFlow model with 2D embedding - analyse
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/004a_generate_1d_nets_for_10k.html">
     Modular TensorFlow model with 1D embedding - Train and save model for 10k patient subset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/004b_analyse_10k_1d_modular.html">
     Investigating the output of neural net embedding subnets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/005a_generate_2d_nets_for_10k.html">
     Modular TensorFlow model with 2D embedding - Train and save model for 10k patient subset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../neural_net/005b_analyse_10k_2d_modular.html">
     Investigating the output of neural net embedding subnets - with 2D subnet output
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ensemble/outline.html">
   Ensemble Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_generate_probabilities.html">
     Ensemble model fitting - generate probabilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/compare_model_outputs.html">
     Comparison of model outputs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_logistic_regression.html">
     Ensemble combine with logistic regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_random_forests.html">
     Ensemble combine with random forests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_with_neural_network.html">
     Ensemble combine with a neural network
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ensemble/ensemble_summary.html">
     Summary of resuts from ensemble models
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Pathway Simulation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pathway_sim/outline_model.html">
   Model building and validation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/pathway_code.html">
     Pathway code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/extract_hospital_performance.html">
     Extract hospital performance for pathway model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/validation.html">
     Stroke pathway simulation - validation and calibration
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../pathway_sim/outline_scenarios.html">
   Testing of alternative what-if? scenarios
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/scenario_results_generation.html">
     Stroke pathway simulation - generation of results from alternative scenarios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../pathway_sim/scenario_analysis.html">
     Analysis of alternative pathway scenarios
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/introduction/key_findings_all.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overall-aims">
   Overall aims
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data">
   Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-statistics">
   General statistics
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inter-hospital-variation">
     Inter-hospital variation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#differences-by-age-group-under-age-80-vs-aged-80-years-and-gender">
     Differences by age group (under age 80 vs. aged 80+ years) and gender:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#effect-of-ethnicity">
     Effect of ethnicity
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#effect-of-clinical-features">
     Effect of clinical features
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stated-reasons-for-not-giving-thrombolysis">
     Stated reasons for not giving thrombolysis
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#effect-of-time-and-day-and-day-of-week-on-use-of-thrombolysis">
     Effect of time and day and day of week on use of thrombolysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#machine-learning">
   Machine Learning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accuracy-of-models">
     Accuracy of models
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#random-forests-what-treatment-would-my-patient-receive-elsewhere">
   Random forests - what treatment would my patient receive elsewhere?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#neural-networks">
   Neural networks
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pathway-simulation">
   Pathway simulation
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="samuel-summary-of-findings">
<h1>SAMueL - Summary of Findings<a class="headerlink" href="#samuel-summary-of-findings" title="Permalink to this headline">¶</a></h1>
<blockquote class="epigraph">
<div><p>“Your decision to treat or not treat… That’s the difficult part. That’s the grey area where everyone does a different thing.”</p>
<p class="attribution">—Stroke Consultant during interviews for SAMueL</p>
</div></blockquote>
<div class="section" id="overall-aims">
<h2>Overall aims<a class="headerlink" href="#overall-aims" title="Permalink to this headline">¶</a></h2>
<p>The overall aims of the project are:</p>
<ul class="simple">
<li><p>Model thrombolysis decision-making using machine learning, so that we may ask the question <em>‘what treatment would my patient receive at other hospitals?’</em></p></li>
<li><p>Model the stroke pathway, using clinical pathway simulation, so that we may ask the question <em>‘what would happen to a hospital’s thrombolysis use of, and benefit from, thrombolysis by changing key aspects of the pathway?’</em>. The key changes investigated are:</p>
<ul>
<li><p>Pathway speed</p></li>
<li><p>Determining stroke onset times</p></li>
<li><p>Making decisions according to the majority vote of decisions that would be expected at a <em>benchmark</em> set of hospitals</p></li>
</ul>
</li>
</ul>
<p>We base our modelling on a simplified view of the stroke pathway:</p>
<p><img alt="" src="../_images/pathway.png" /></p>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>Data was retrieved for 246,676 emergency stroke admissions to acute stroke teams in England and Wales between 2016 and 2018 (three full years). Data used is for units which have at least 300 emergency stroke admissions with at least 10 patients receiving thrombolysis in the three years.</p>
</div>
<div class="section" id="general-statistics">
<h2>General statistics<a class="headerlink" href="#general-statistics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>94.7% of patients have an out-of-hospital stroke onset.</p></li>
<li><p>11.8% of all out-of-hospital stroke onset arrivals receive thrombolysis.</p></li>
<li><p>67% of all patients have a determined stroke time of onset, 60% of whom arrive within 4 hours of known stroke onset. 40% of all arrivals arrive within 4 hours of known stroke onset.</p></li>
</ul>
<p>Of those out-of-hospital onset patients arriving within 4 hours of known stroke onset:</p>
<ul class="simple">
<li><p>The average onset-to-arrival time is 111 minutes</p></li>
<li><p>95% receive a scan within 4 hours of arrival, with an average arrival-to-scan time of 43 minutes.</p></li>
<li><p>30% of those who receive a scan within 4 hours of known stroke onset receive thrombolysis.</p></li>
<li><p>11.8% of all arrivals receive thrombolysis.</p></li>
<li><p>The average scan-to-needle time is 40 minutes, the average arrival-to-needle time is 63 minutes, and the average onset-to-needle time is 158 minutes.</p></li>
</ul>
<div class="section" id="inter-hospital-variation">
<h3>Inter-hospital variation<a class="headerlink" href="#inter-hospital-variation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Thrombolysis use varies from 1.5% to 24.3% of all patients, and 7.3% to 49.7% of patients arriving within 4 hours of known stroke onset.</p></li>
<li><p>The proportion of determined stroke onsets ranges from 34% to 99%.</p></li>
<li><p>The proportion of patients arriving within 4 hours of known stroke onset ranges from 22% to 56%.</p></li>
<li><p>The proportion of patients scanned within 4 hours of arrival ranges from 85% to 100%.</p></li>
<li><p>Average arrival-to-scan time (for those arriving within 4 hours of known stroke onset and scanned within 4 hours of arrival) ranges from 19 to 93 minutes.</p></li>
<li><p>Average arrival-to-needle time varies from 26 to 111 minutes.</p></li>
<li><p>The proportion of patients aged 80+ varies from 29% to 58%.</p></li>
<li><p>The average NIHSS (stroke severity) ranges from 6.1 to 11.7.</p></li>
</ul>
</div>
<div class="section" id="differences-by-age-group-under-age-80-vs-aged-80-years-and-gender">
<h3>Differences by age group (under age 80 vs. aged 80+ years) and gender:<a class="headerlink" href="#differences-by-age-group-under-age-80-vs-aged-80-years-and-gender" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>43% of arrivals are aged 80 or more.</p></li>
<li><p>10.1% of arrivals aged 80+ receive thrombolysis, c.f. 13.0% of those under age 80. There is a steady decline in use of thrombolysis over the age of 55.</p></li>
<li><p>39% of arrivals aged 80+ arrive within 4 hours of known stroke onset, c.f. 40% of those under age 80.</p></li>
<li><p>The average disability (modified Rankin Scale, mRS) before stroke is 1.7 for those aged 80+, c.f. 0.6 for those under age 80.</p></li>
<li><p>The average stroke severity (NIHSS) on arrival is 10.7 for those aged 80+, c.f. 8.2 for those under age 80.</p></li>
<li><p>Of those scanned within 4 hours, 26.3% of those aged 80+ receive thrombolysis, c.f. 34.7% of those under age 80.</p></li>
<li><p>51.4% of all arrivals are male.</p></li>
<li><p>Of those arriving within 4 hours of known stroke onset 30.8% of all male arrivals receive thrombolysis, compared with 28.2% for females.</p></li>
</ul>
</div>
<div class="section" id="effect-of-ethnicity">
<h3>Effect of ethnicity<a class="headerlink" href="#effect-of-ethnicity" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>There is a small effect of ethnicity: 10.2% of black people receive thrombolysis, compared with 11.7% of white people. This difference is mostly explained by a lower proportion of black people arriving within 4 hours of known stroke onset.</p></li>
</ul>
</div>
<div class="section" id="effect-of-clinical-features">
<h3>Effect of clinical features<a class="headerlink" href="#effect-of-clinical-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use of thrombolysis falls as disability (mRS) before stroke increases.</p></li>
<li><p>Use of thrombolysis is low at low stroke severity on arrival, increases and reaches a plateau (NIHSS 6-25) and falls again at higher stroke severity on arrival.</p></li>
<li><p>The presence or absence of comorbidities can be a strong indicator of the use of thrombolysis. For example those on anticoagulant therapies receive thrombolysis less than those who do not, but those on anti-platelet therapies receive it more.</p></li>
</ul>
</div>
<div class="section" id="stated-reasons-for-not-giving-thrombolysis">
<h3>Stated reasons for not giving thrombolysis<a class="headerlink" href="#stated-reasons-for-not-giving-thrombolysis" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The three most common reasons stated for not giving thrombolysis are stroke too mild/severe, haemorrhagic  stroke, and patient improving.</p></li>
</ul>
</div>
<div class="section" id="effect-of-time-and-day-and-day-of-week-on-use-of-thrombolysis">
<h3>Effect of time and day and day of week on use of thrombolysis<a class="headerlink" href="#effect-of-time-and-day-and-day-of-week-on-use-of-thrombolysis" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Nationally, there is a significant fall in use of thrombolysis for arrivals between 3am and 6am (with about 6% receiving thrombolysis, compared with 11% to 13% in other periods during the day), but the number of arrivals in this period is only about 3% of all arrivals.</p></li>
<li><p>Nationally there is a small effect of day of week, with thrombolysis use ranging from 11.2 to 12.6% by day of week (increasing Monday through to Sunday).</p></li>
</ul>
</div>
</div>
<div class="section" id="machine-learning">
<h2>Machine Learning<a class="headerlink" href="#machine-learning" title="Permalink to this headline">¶</a></h2>
<p>We built a variety of model types:</p>
<ol class="simple">
<li><p><em>Logistic regression</em>: We used either a single model with one-hot encoding of hospitals*, or fitted models to each hospital independently.</p></li>
<li><p><em>Random forests</em>: We used either a single model with one-hot encoding of hospitals*, or fitted models to each hospital independently.</p></li>
<li><p><em>Neural networks</em>: We used either a fully-connected network (where all features are treated as a single set), or a modular embedding network, where features are split into three groups: hospital ID, clinical features, pathway timings. Each group is handled by a sub-network which outputs an ‘embedding vector’, reducing the inputs down to either one or two values which are then combined together before final output.</p></li>
</ol>
<p>*One-hot encoding converts a hospital ID to a vector that is all zeros apart from the index of the hospital ID which is set to one. So hospital 2 out of a total of five hospitals would have one-hot encoding of [0, 1, 0, 0, 0].</p>
<div class="section" id="accuracy-of-models">
<h3>Accuracy of models<a class="headerlink" href="#accuracy-of-models" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Model*</p></th>
<th class="head"><p>Accuracy (%)</p></th>
<th class="head"><p>ROC-AUC</p></th>
<th class="head"><p>Max Sens=Spec (%) [1]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Logistic regression single model</p></td>
<td><p>83.2</p></td>
<td><p>0.904</p></td>
<td><p>82.0</p></td>
</tr>
<tr class="row-odd"><td><p>Logistic regression hospital-level models</p></td>
<td><p>77.5</p></td>
<td><p>0.815</p></td>
<td><p>74.0</p></td>
</tr>
<tr class="row-even"><td><p>Random forest single model</p></td>
<td><p>84.6</p></td>
<td><p>0.914</p></td>
<td><p>83.7</p></td>
</tr>
<tr class="row-odd"><td><p>Random forest hospital-level models</p></td>
<td><p>81.4</p></td>
<td><p>0.854</p></td>
<td><p>78.1</p></td>
</tr>
<tr class="row-even"><td><p>Fully-connected neural net single model</p></td>
<td><p>84.4</p></td>
<td><p>0.913</p></td>
<td><p>83.3</p></td>
</tr>
<tr class="row-odd"><td><p>1D Embedding neural net single model</p></td>
<td><p>85.5</p></td>
<td><p>0.921</p></td>
<td><p>84.5</p></td>
</tr>
</tbody>
</table>
<p>* Single model fits use one-hot encoding for hospitals. Hospital-level models fit a model to each hospital independently. Embedding neural nets encode hospital id, pathway data, and clinical data into a single value vector each.</p>
<p>[1] The maximum value where sensitivity matches specificity.</p>
<ul class="simple">
<li><p>There is high agreement between model types. Logistic regression (single fit), random forests (single fit), and neural networks (single fit, 1D embedding) agree classification on 87% of patients.  Neural networks and random forests agree on 93% of patients.</p></li>
<li><p>There is generally higher agreement between model types (87% to 93% for any pairwise comparison), than between models and reality (83% to 86% accuracy for the same model types).</p></li>
<li><p>Combining outputs of the three model types into one combined model (an <em>ensemble</em> model) did not improve accuracy.</p></li>
<li><p>Accuracy of models increased with training set size up to about 30k training et examples.</p></li>
<li><p>All random forest and neural network models were well calibrated, meaning that 9 out of 10 people with a predicted 90% probability of receiving thrombolysis would receive thrombolysis. The single fit logistic regression model, but not the individual hospital fit model was well calibrated.</p></li>
</ul>
</div>
</div>
<div class="section" id="random-forests-what-treatment-would-my-patient-receive-elsewhere">
<h2>Random forests - what treatment would my patient receive elsewhere?<a class="headerlink" href="#random-forests-what-treatment-would-my-patient-receive-elsewhere" title="Permalink to this headline">¶</a></h2>
<p>For most modelling (e.g. inclusion in stroke pathway model) we have chosen to use hospital-level random forests models. Though accuracy is a little lower than the best models, these models are easier for people to understand and have strong hospital independence.</p>
<p>When comparing predicted decisions between hospitals:</p>
<ul class="simple">
<li><p>It is easier to find majority agreement on who not to thrombolyse than who to thrombolyse. 77.5% of all patients have a treatment decision that is agreed by 80% hospitals. Of those who were not given thrombolysis, 84.6% had agreement by 80% hospitals. Of those who were given thrombolysis, 60.4% had agreement by 80% hospitals</p></li>
<li><p>A <em>benchmark set</em> of hospitals was created by passing the same 10k patient cohort set through all hospitals, and selecting the 30 hospitals with the highest thrombolysis use. If all thrombolysis decisions were made by a majority vote of these hospitals then thrombolysis use (in those arriving within 4 hours of known stroke onset) would be expected to increase from 29.5% to 36.9%.</p></li>
<li><p>Decisions at each hospital may be compared with the benchmark majority vote decision.</p></li>
<li><p>These models may be used to identify two types of patients:</p>
<ul>
<li><p>Patients where the model has high confidence in prediction, but were not treated as expected (e.g. a patient who appears to have high suitability for thrombolysis, but did not receive it).</p></li>
<li><p>Patients which were treated according to the prediction of the hospital model, but where the majority of the benchmark hospitals would have treated that patient differently.</p></li>
</ul>
</li>
<li><p>Patient vignettes may be constructed to illustrate particular types of patients, for example a patient in a hospital that has low treatment rates of patients with previous disability. These vignettes are potentially useful for clinical discussions.</p></li>
<li><p>Hospitals may be grouped by comparison of what proportion of patients would be expected to have the same thrombolysis decision. This grouping is made clearer by using a subset of patients with higher divergence of decisions (those patients that 30-70% of hospitals would thrombolyse).</p></li>
<li><p>For patients not treated as expected we can use the structure of the random forests model to find similar patients that were treated differently.</p></li>
</ul>
<p><img alt="" src="images/benchmark_thrombolysis.png" /></p>
</div>
<div class="section" id="neural-networks">
<h2>Neural networks<a class="headerlink" href="#neural-networks" title="Permalink to this headline">¶</a></h2>
<p>Neural networks offer the greatest accuracy (though not by a large amount), but are more ‘black box’ than other model types so are not currently our preferred machine learning model. However, as well as high accuracy, modular embedding networks offer the advantage of being able to separate out hospital, clinical, and pathway features.</p>
<ul class="simple">
<li><p>A 1D embedding network encodes hospitals, patients, and pathway information as a single value for each.</p>
<ul>
<li><p>Each hospital always has the same hospital embedding value. This value correlates very highly with the predicted thrombolysis use on a standard test set of patients. The network therefore appears to be encoding a hospital’s ‘willingness/enthusiasm to use thrombolysis’.</p></li>
<li><p>Each patient has a separate clinical embedding value, based just on their clinical features. This correlates closely with the probability of receiving thrombolysis. The network therefore appears to be encoding a patient’s ‘clinical suitability for thrombolysis’. Clinical embedding mimics patterns seen in thrombolysis use such as low perceived suitability for thrombolysis at very low or high stroke severity scores, and declining perceived suitability for thrombolysis with level of disability before stroke.</p></li>
</ul>
</li>
<li><p>A 2D embedding network encodes hospitals, patients, and pathway information as a pair of values for each allowing, for example, plotting on 2D chart where similar hospitals/patients should cluster together.</p>
<ul>
<li><p>2D hospital embedding does not appear to show any more detail than 1D embedding.</p></li>
<li><p>2D patient embedding clusters patients by clear groups - for example four groups (located at each corner of a chart when plotting the patient embeddings 2D vector) are: 1) patients with high clinical suitability for thrombolysis, 2) non-thrombolysed haemorrhagic stroke patients, 3) non-thrombolysed severe stroke, 4) non-thrombolysed mild stroke.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="pathway-simulation">
<h2>Pathway simulation<a class="headerlink" href="#pathway-simulation" title="Permalink to this headline">¶</a></h2>
<p>The model is used to examine the effect, at each hospital and nationally, of making three key changes (alone or in combination) to the stroke pathway:</p>
<ol class="simple">
<li><p><em>Speed</em>: Sets 95% of patients having a scan within 4 hours of arrival, and all patients have 15 minutes arrival to scan and 15 minutes scan to needle.</p></li>
<li><p><em>Onset-known</em>: Sets the proportion of patients with a known onset time of stroke to the national upper quartile if currently less than the national upper quartile (leave any greater than the upper national quartile at their current level).</p></li>
<li><p><em>Benchmark</em>: The benchmark thrombolysis rate takes the likelihood to give thrombolysis for patients scanned within 4 hours of onset from the majority vote of the 30 hospitals with the highest predicted thrombolysis use in a standard 10k cohort set of patients. These are from Random Forests models.</p></li>
</ol>
<p>Results:</p>
<ul class="simple">
<li><p>The model predicts current thrombolysis use with high accuracy (R-squared of 0.980, mean absolute difference in thrombolysis use of 0.5 percentage points).</p></li>
<li><p>Combining the three changes suggests that thrombolysis use could potentially be increased from 11.6% to 18.3% of all emergency admissions, and the clinical benefit increased from 9.4 to 17.6 additional good outcomes per 1,000 admissions. The average drivers in improvement in thrombolysis use are benchmark decisions &gt; determining stroke onset &gt; speed, while the average drivers in improvement in outcomes are speed &gt; benchmark decisions &gt; determining stroke onset.</p></li>
<li><p>The model identifies the changes that make most difference at each hospital. For improvement in thrombolysis use the changes that make the greatest single difference are benchmark decisions (at 41 hospitals), determining stroke onset time (at 40 hospitals), and speed (at 10 hospitals). One hospital did not have improvement from any change in the model. For improvement in predicted clinical benefit the changes that make the greatest single difference are benchmark decisions (at 55 hospitals), speed (at 51 hospitals) and determining stroke onset time (at 26 hospitals).</p></li>
<li><p>If all changes were made at all hospitals there would still be significant variation in use of, and benefit from, thrombolysis. This is due to differences in local patient populations (both in terms of differing clinical presentations, and differences in time from onset to arrival), but the total national benefit will be significantly improved.</p></li>
<li><p>The model may be used to provide a target use of thrombolysis that is tailored to each hospital.</p></li>
</ul>
<p>Net effect of changes at all hospitals:</p>
<p><img alt="" src="../_images/scenarios.jpg" /></p>
<p>Distributional shift in thrombolysis use and expected benefit:</p>
<p><img alt="" src="../_images/distribution.jpg" /></p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./introduction"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="plain_english.html" title="previous page">Plain English Summary</a>
    <a class='right-next' id="next-link" href="project_team.html" title="next page">Project team</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By SAMueL project team<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>